<!doctype html><html lang="zh-CN"><head><meta charset="utf-8" /><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="generator" content="VuePress 2.0.0-rc.20" /><meta name="theme" content="VuePress Theme Plume " /><script id="check-mac-os">document.documentElement.classList.toggle('mac', /Mac|iPhone|iPod|iPad/i.test(navigator.platform))</script><script id="check-dark-mode">;(function () {const um= localStorage.getItem('vuepress-theme-appearance') || 'auto';const sm = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;const isDark = um === 'dark' || (um !== 'light' && sm);document.documentElement.dataset.theme = isDark ? 'dark' : 'light';})();</script><meta property="og:url" content="https://cv-rmvl.github.io/intro/repo/03.html"><meta property="og:site_name" content="RMVL 用户手册"><meta property="og:title" content="【03】参数模块"><meta property="og:description" content="1. 参数模块简介 RMVL 中，一部分模块（涉及主要模块和扩展模块）的功能在不同运行环境或者不同需求的情况下需要有不同的参数配置，为此 RVML 将这些运行时可变的参数提炼出来，并且使用统一的管理方式，完成了参数类型、参数默认值、参数名、参数运行时加载的定义。 原先若有计划使用运行时参数，在 调整参数名、参数默认值 新增某一参数类（结构体） 的时候，..."><meta property="og:type" content="article"><meta property="og:locale" content="zh-CN"><meta property="og:updated_time" content="2025-09-29T15:56:53.000Z"><meta property="article:modified_time" content="2025-09-29T15:56:53.000Z"><script type="application/ld+json">{"@context":"https://schema.org","@type":"Article","headline":"【03】参数模块","image":[""],"dateModified":"2025-09-29T15:56:53.000Z","author":[]}</script><link rel="icon" href="/images/favicon.png"><title>【03】参数模块 | RMVL 用户手册</title><meta name="description" content="1. 参数模块简介 RMVL 中，一部分模块（涉及主要模块和扩展模块）的功能在不同运行环境或者不同需求的情况下需要有不同的参数配置，为此 RVML 将这些运行时可变的参数提炼出来，并且使用统一的管理方式，完成了参数类型、参数默认值、参数名、参数运行时加载的定义。 原先若有计划使用运行时参数，在 调整参数名、参数默认值 新增某一参数类（结构体） 的时候，..."><link rel="preload" href="/assets/style-Ci-AY3Xk.css" as="style"><link rel="stylesheet" href="/assets/style-Ci-AY3Xk.css"><link rel="modulepreload" href="/assets/app-CPCbhr2f.js"><link rel="modulepreload" href="/assets/03.html-C79Dp-do.js"><link rel="prefetch" href="/assets/index.html-DphmKoqM.js" as="script"><link rel="prefetch" href="/assets/index.html-CBnKixlF.js" as="script"><link rel="prefetch" href="/assets/faq.html-BWjHzvrT.js" as="script"><link rel="prefetch" href="/assets/joinus.html-DexD8zE0.js" as="script"><link rel="prefetch" href="/assets/index.html-B9FLvA-f.js" as="script"><link rel="prefetch" href="/assets/index.html-Bizm3ZZK.js" as="script"><link rel="prefetch" href="/assets/linux.html-CBNLhUMu.js" as="script"><link rel="prefetch" href="/assets/win.html-DzdX0nVh.js" as="script"><link rel="prefetch" href="/assets/index.html-D81J7q8K.js" as="script"><link rel="prefetch" href="/assets/ext_cmake.html-Dau6Ggcd.js" as="script"><link rel="prefetch" href="/assets/ext_idl.html-YcZdYP1b.js" as="script"><link rel="prefetch" href="/assets/01.html-BROUylTY.js" as="script"><link rel="prefetch" href="/assets/02.html-kbpmzsgP.js" as="script"><link rel="prefetch" href="/assets/404.html-ClcGQcgX.js" as="script"><link rel="prefetch" href="/assets/index-BZSEhAeG.js" as="script"><link rel="prefetch" href="/assets/photoswipe.esm-DXWKOczD.js" as="script"><link rel="prefetch" href="/assets/searchBox-default-e8Wn8Z8P.js" as="script"><link rel="prefetch" href="/assets/SearchBox-BXHPb-mn.js" as="script"></head><body><div id="app"><!--[--><!--[--><div class="theme-plume vp-layout" vp-container data-v-68cd6b44><!--[--><!--[--><!--]--><!--[--><span tabindex="-1" data-v-d5a8d0bc></span><a href="#VPContent" class="vp-skip-link visually-hidden" data-v-d5a8d0bc> Skip to content </a><!--]--><!----><header class="vp-nav" data-v-68cd6b44 data-v-d34f28d6><div class="vp-navbar" vp-navbar data-v-d34f28d6 data-v-70d97d16><div class="wrapper" data-v-70d97d16><div class="container" data-v-70d97d16><div class="title" data-v-70d97d16><div class="vp-navbar-title has-sidebar" data-v-70d97d16 data-v-1a4f50af><a class="vp-link no-icon link title" href="/" data-v-1a4f50af data-v-442a52aa><!--[--><!--[--><!--]--><!--[--><!--[--><!--[--><img class="vp-image dark logo" style="" src="/images/favicon.png" alt data-v-eda4b9bd><!--]--><!--[--><img class="vp-image light logo" style="" src="/images/favicon.png" alt data-v-eda4b9bd><!--]--><!--]--><!--]--><span data-v-1a4f50af>RMVL 用户手册</span><!--[--><!--]--><!--]--><!----></a></div></div><div class="content" data-v-70d97d16><div class="content-body" data-v-70d97d16><!--[--><!--]--><div class="vp-navbar-search search" data-v-70d97d16><div class="search-wrapper" data-v-97535d1e><!----><div id="local-search" data-v-97535d1e><button type="button" class="mini-search mini-search-button" aria-label="搜索文档" data-v-97535d1e><span class="mini-search-button-container"><span class="mini-search-search-icon vpi-mini-search" aria-label="search icon"></span><span class="mini-search-button-placeholder">搜索文档</span></span><span class="mini-search-button-keys"><kbd class="mini-search-button-key"></kbd><kbd class="mini-search-button-key">K</kbd></span></button></div></div></div><nav aria-labelledby="main-nav-aria-label" class="vp-navbar-menu menu" data-v-70d97d16 data-v-d43c1732><span id="main-nav-aria-label" class="visually-hidden" data-v-d43c1732>Main Navigation</span><!--[--><!--[--><a class="vp-link no-icon link navbar-menu-link" href="/" tabindex="0" data-v-d43c1732 data-v-9970a379 data-v-442a52aa><!--[--><!----><span data-v-9970a379>首页</span><!--]--><!----></a><!--]--><!--[--><a class="vp-link no-icon link navbar-menu-link" href="/intro/" tabindex="0" data-v-d43c1732 data-v-9970a379 data-v-442a52aa><!--[--><!----><span data-v-9970a379>简介</span><!--]--><!----></a><!--]--><!--[--><a class="vp-link no-icon link navbar-menu-link" href="/quickstart/" tabindex="0" data-v-d43c1732 data-v-9970a379 data-v-442a52aa><!--[--><!----><span data-v-9970a379>入门</span><!--]--><!----></a><!--]--><!--[--><a class="vp-link no-icon link navbar-menu-link" href="/docnav/" tabindex="0" data-v-d43c1732 data-v-9970a379 data-v-442a52aa><!--[--><!----><span data-v-9970a379>文档</span><!--]--><!----></a><!--]--><!--[--><div class="vp-flyout vp-navbar-menu-group" data-v-d43c1732 data-v-feafea4e><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-feafea4e><span class="text" data-v-feafea4e><!----><!----><span data-v-feafea4e>更多</span><span class="vpi-chevron-down text-icon" data-v-feafea4e></span></span></button><div class="menu" data-v-feafea4e><div class="vp-menu" data-v-feafea4e data-v-709dc2b1><div class="items" data-v-709dc2b1><!--[--><!--[--><div class="vp-menu-link" data-v-709dc2b1 data-v-aaf95230><a class="vp-link no-icon link" href="/etc/faq.html" data-v-aaf95230 data-v-442a52aa><!--[--><!----> 常见问题<!--]--><!----></a></div><!--]--><!--[--><div class="vp-menu-link" data-v-709dc2b1 data-v-aaf95230><a class="vp-link no-icon link" href="/etc/joinus.html" data-v-aaf95230 data-v-442a52aa><!--[--><!----> 贡献<!--]--><!----></a></div><!--]--><!--[--><div class="vp-menu-group" data-v-709dc2b1 data-v-c497e9e3><p class="title" data-v-c497e9e3><span class="vp-icon-img" data-v-c497e9e3 data-v-be774d6a><img src="/images/rmvl.png" alt="" style="" data-v-be774d6a></span><span data-v-c497e9e3>RMVL 常用链接</span></p><!--[--><!--[--><div class="vp-menu-link" data-v-c497e9e3 data-v-aaf95230><a class="vp-link no-icon link" href="https://cv-rmvl.github.io/docs/2.x/d1/db4/tutorial_install.html" target="_blank" rel="noreferrer" data-v-aaf95230 data-v-442a52aa><!--[--><span class="vp-icon-img" data-v-aaf95230 data-v-be774d6a><img src="/images/rmvl.png" alt="" style="" data-v-be774d6a></span> 构建、安装<!--]--><span class="vpi-external-link icon" data-v-442a52aa></span></a></div><!--]--><!--[--><div class="vp-menu-link" data-v-c497e9e3 data-v-aaf95230><a class="vp-link no-icon link" href="https://cv-rmvl.github.io/docs/2.x/d6/d6e/tutorial_table_of_content_modules.html" target="_blank" rel="noreferrer" data-v-aaf95230 data-v-442a52aa><!--[--><span class="vp-icon-img" data-v-aaf95230 data-v-be774d6a><img src="/images/rmvl.png" alt="" style="" data-v-be774d6a></span> 主要模块教程<!--]--><span class="vpi-external-link icon" data-v-442a52aa></span></a></div><!--]--><!--]--></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--[--><a class="vp-link no-icon link navbar-menu-link" href="https://github.com/cv-rmvl/rmvl" target="_blank" rel="noreferrer" tabindex="0" data-v-d43c1732 data-v-9970a379 data-v-442a52aa><!--[--><!----><span data-v-9970a379>Github</span><!--]--><span class="vpi-external-link icon" data-v-442a52aa></span></a><!--]--><!--]--></nav><!----><div class="vp-navbar-appearance appearance" data-v-70d97d16 data-v-a295abf6><button class="vp-switch vp-switch-appearance" type="button" role="switch" title aria-checked="false" data-v-a295abf6 data-v-596c25a9 data-v-d84fedac><span class="check" data-v-d84fedac><span class="icon" data-v-d84fedac><!--[--><span class="vpi-sun sun" data-v-596c25a9></span><span class="vpi-moon moon" data-v-596c25a9></span><!--]--></span></span></button></div><!----><div class="vp-flyout vp-navbar-extra extra" data-v-70d97d16 data-v-652282fd data-v-feafea4e><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-feafea4e><span class="vpi-more-horizontal icon" data-v-feafea4e></span></button><div class="menu" data-v-feafea4e><div class="vp-menu" data-v-feafea4e data-v-709dc2b1><!----><!--[--><!--[--><!----><div class="group" data-v-652282fd><div class="item appearance" data-v-652282fd><p class="label" data-v-652282fd>外观</p><div class="appearance-action" data-v-652282fd><button class="vp-switch vp-switch-appearance" type="button" role="switch" title aria-checked="false" data-v-652282fd data-v-596c25a9 data-v-d84fedac><span class="check" data-v-d84fedac><span class="icon" data-v-d84fedac><!--[--><span class="vpi-sun sun" data-v-596c25a9></span><span class="vpi-moon moon" data-v-596c25a9></span><!--]--></span></span></button></div></div></div><!----><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="vp-navbar-hamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="nav-screen" data-v-70d97d16 data-v-2b50024d><span class="container" data-v-2b50024d><span class="top" data-v-2b50024d></span><span class="middle" data-v-2b50024d></span><span class="bottom" data-v-2b50024d></span></span></button></div></div></div></div><div class="divider" data-v-70d97d16><div class="divider-line" data-v-70d97d16></div></div></div><!----></header><div class="vp-local-nav reached-top" data-v-68cd6b44 data-v-3944d8e8><button class="menu" aria-expanded="false" aria-controls="SidebarNav" data-v-3944d8e8><span class="vpi-align-left menu-icon" data-v-3944d8e8></span><span class="menu-text" data-v-3944d8e8>Menu</span></button><div class="vp-local-nav-outline-dropdown" style="--vp-vh:0px;" data-v-3944d8e8 data-v-423a73ec><button data-v-423a73ec>返回顶部</button><!----></div></div><aside class="vp-sidebar" vp-sidebar data-v-68cd6b44 data-v-3c61d592><div class="curtain" data-v-3c61d592></div><nav id="SidebarNav" class="nav" aria-labelledby="sidebar-aria-label" tabindex="-1" data-v-3c61d592><span id="sidebar-aria-label" class="visually-hidden" data-v-3c61d592> Sidebar Navigation </span><!--[--><!--]--><!--[--><div class="no-transition group" data-v-473fd05b><section class="vp-sidebar-item sidebar-item level-0 is-link has-active" data-v-473fd05b data-v-ff685660><div class="item" tabindex="0" data-v-ff685660><div class="indicator" data-v-ff685660></div><!----><a class="vp-link no-icon link link" href="/intro/" data-v-ff685660 data-v-442a52aa><!--[--><h2 class="text" data-v-ff685660>RMVL 基本说明</h2><!--]--><!----></a><!----></div><div class="items" data-v-ff685660><!--[--><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-ff685660 data-v-ff685660><div class="item" data-v-ff685660><div class="indicator" data-v-ff685660></div><!----><a class="vp-link no-icon link link" href="/intro/repo/01.html" data-v-ff685660 data-v-442a52aa><!--[--><p class="text" data-v-ff685660>【01】主要模块</p><!--]--><!----></a><!----></div><!----></div><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-ff685660 data-v-ff685660><div class="item" data-v-ff685660><div class="indicator" data-v-ff685660></div><!----><a class="vp-link no-icon link link" href="/intro/repo/02.html" data-v-ff685660 data-v-442a52aa><!--[--><p class="text" data-v-ff685660>【02】扩展模块</p><!--]--><!----></a><!----></div><!----></div><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-ff685660 data-v-ff685660><div class="item" data-v-ff685660><div class="indicator" data-v-ff685660></div><!----><a class="vp-link no-icon link link" href="/intro/repo/03.html" data-v-ff685660 data-v-442a52aa><!--[--><p class="text" data-v-ff685660>【03】参数模块</p><!--]--><!----></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-473fd05b><section class="vp-sidebar-item sidebar-item level-0 is-link" data-v-473fd05b data-v-ff685660><div class="item" tabindex="0" data-v-ff685660><div class="indicator" data-v-ff685660></div><!----><a class="vp-link no-icon link link" href="/intro/extension/" data-v-ff685660 data-v-442a52aa><!--[--><h2 class="text" data-v-ff685660>Visual Studio Code 插件</h2><!--]--><!----></a><!----></div><div class="items" data-v-ff685660><!--[--><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-ff685660 data-v-ff685660><div class="item" data-v-ff685660><div class="indicator" data-v-ff685660></div><!----><a class="vp-link no-icon link link" href="/intro/extension/ext_cmake.html" data-v-ff685660 data-v-442a52aa><!--[--><p class="text" data-v-ff685660>【01】CMake 扩展</p><!--]--><!----></a><!----></div><!----></div><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-ff685660 data-v-ff685660><div class="item" data-v-ff685660><div class="indicator" data-v-ff685660></div><!----><a class="vp-link no-icon link link" href="/intro/extension/ext_idl.html" data-v-ff685660 data-v-442a52aa><!--[--><p class="text" data-v-ff685660>【02】IDL 接口定义语言</p><!--]--><!----></a><!----></div><!----></div><!--]--></div></section></div><!--]--><!--[--><!--]--></nav></aside><!--[--><div id="VPContent" vp-content class="vp-content has-sidebar" data-v-68cd6b44 data-v-eb709286><div class="vp-doc-container has-sidebar has-aside" data-v-eb709286 data-v-7293e39a><!--[--><!--]--><div class="container" data-v-7293e39a><div class="aside" vp-outline data-v-7293e39a><div class="aside-curtain" data-v-7293e39a></div><div class="aside-container" data-v-7293e39a><div class="aside-content" data-v-7293e39a><div class="vp-doc-aside" data-v-7293e39a data-v-5976474c><!--[--><!--]--><!--[--><!--]--><nav aria-labelledby="doc-outline-aria-label" class="vp-doc-aside-outline" role="navigation" data-v-5976474c data-v-aa56eba0><div class="content" data-v-aa56eba0><div class="outline-marker" data-v-aa56eba0></div><div id="doc-outline-aria-label" aria-level="2" class="outline-title" role="heading" data-v-aa56eba0><span data-v-aa56eba0>此页内容</span><span class="vpi-print icon" data-v-aa56eba0></span></div><ul class="root" data-v-aa56eba0 data-v-3e6b023c><!--[--><!--]--></ul></div></nav><!--[--><!--]--><div class="spacer" data-v-5976474c></div><!--[--><!--]--></div></div></div></div><div class="content" data-v-7293e39a><div class="content-container" data-v-7293e39a><!--[--><!--]--><main class="main" data-v-7293e39a><nav class="vp-breadcrumb" data-v-7293e39a data-v-1ae4ad7a><ol vocab="https://schema.org/" typeof="BreadcrumbList" data-v-1ae4ad7a><!--[--><li property="itemListElement" typeof="ListItem" data-v-1ae4ad7a><a class="vp-link no-icon link breadcrumb" href="/" property="item" typeof="WebPage" data-v-1ae4ad7a data-v-442a52aa><!--[-->首页<!--]--><!----></a><span class="vpi-chevron-right" data-v-1ae4ad7a></span><meta property="name" content="首页" data-v-1ae4ad7a><meta property="position" content="1" data-v-1ae4ad7a></li><li property="itemListElement" typeof="ListItem" data-v-1ae4ad7a><a class="vp-link no-icon link breadcrumb" href="/intro/" property="item" typeof="WebPage" data-v-1ae4ad7a data-v-442a52aa><!--[-->RMVL 基本说明<!--]--><!----></a><span class="vpi-chevron-right" data-v-1ae4ad7a></span><meta property="name" content="RMVL 基本说明" data-v-1ae4ad7a><meta property="position" content="2" data-v-1ae4ad7a></li><li property="itemListElement" typeof="ListItem" data-v-1ae4ad7a><a class="vp-link no-icon link breadcrumb current" href="/intro/repo/03.html" property="item" typeof="WebPage" data-v-1ae4ad7a data-v-442a52aa><!--[-->【03】参数模块<!--]--><!----></a><!----><meta property="name" content="【03】参数模块" data-v-1ae4ad7a><meta property="position" content="3" data-v-1ae4ad7a></li><!--]--></ol></nav><!--[--><h1 class="vp-doc-title page-title" data-v-7e9208b4>【03】参数模块 <!----></h1><div class="vp-doc-meta" data-v-7e9208b4><p class="reading-time" data-v-7e9208b4><span class="vpi-books icon" data-v-7e9208b4></span><span data-v-7e9208b4>约 1769 字</span><span data-v-7e9208b4>大约 6 分钟</span></p><!----><!----></div><!--]--><div class="_intro_repo_03 external-link-icon-enabled vp-doc plume-content" vp-content data-v-7293e39a><div data-v-7293e39a><h3 id="_1-参数模块简介" tabindex="-1"><a class="header-anchor" href="#_1-参数模块简介"><span>1. 参数模块简介</span></a></h3><p>RMVL 中，一部分模块（涉及主要模块和扩展模块）的功能在不同运行环境或者不同需求的情况下需要有不同的参数配置，为此 RVML 将这些运行时可变的参数提炼出来，并且使用统一的管理方式，完成了参数类型、参数默认值、参数名、参数运行时加载的定义。</p><p>原先若有计划使用运行时参数，在</p><ul><li>调整参数名、参数默认值</li><li>新增某一参数类（结构体）</li></ul><p>的时候，需要在头文件以及对应源文件的位置写上大量重复的代码，管理极其不方便。为此 RMVL 参数模块定义了新的参数规范文件，这类文件以 <code>*.para</code> 为后缀，以及提供了 CMake 配置期间将 <code>*.para</code> 转换为对应 <code>*.h(hpp)</code> 以及 <code>*.cpp</code> 的 CMake 函数 <code>rmvl_generate_para</code>，该函数定义在 <code>&lt;project&gt;/cmake/RMVLGenPara.cmake</code> 文件中。</p><h3 id="_2-参数规范文件" tabindex="-1"><a class="header-anchor" href="#_2-参数规范文件"><span>2. 参数规范文件</span></a></h3><p>这里举一个 <code>*.para</code> 文件的示例，写法与 ROS Message 的 <code>*.msg</code> 文件类似，不过参数的类型均使用 C/C++ 中的类型，并且添加了注释功能。</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span>#################### 光学参数 ####################</span></span>
<span class="line"><span>float exposure = 1500  # 相机曝光</span></span>
<span class="line"><span>float saturation = 100 # 相机饱和度</span></span>
<span class="line"><span>float gain = 64        # 相机数字增益</span></span>
<span class="line"><span>uint32_t b_gain = 1500 # 相机蓝色增益</span></span>
<span class="line"><span>uint32_t g_gain = 1500 # 相机绿色增益</span></span>
<span class="line"><span>uint32_t r_gain = 1500 # 相机红色增益</span></span>
<span class="line"><span>int auto_exposure = 0  # 相机自动曝光模式</span></span>
<span class="line"><span>int auto_wb = 0        # 相机自动白平衡模式</span></span>
<span class="line"><span></span></span>
<span class="line"><span>#################### 设备参数 ####################</span></span>
<span class="line"><span>int grab_mode = 1     # 相机 grab 模式</span></span>
<span class="line"><span>int retrieve_mode = 1 # 相机 retrieve 模式</span></span>
<span class="line"><span>string serial_number  # 相机序列号</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>这里列出参数规范文件的参数类型表</p><div class="full_width_table"><!----><table><thead><tr><th style="text-align:center;">数据类型</th><th style="text-align:left;">含义</th></tr></thead><tbody><tr><td style="text-align:center;">基本类型</td><td style="text-align:left;">1. 包括 <code>int</code>、<code>uint8_t</code>、<code>double</code>、<code>float</code>、<code>string</code> 等<br>2. 对标 C++ 的基础类型和 <code>std::string</code></td></tr><tr><td style="text-align:center;">矩阵类型</td><td style="text-align:left;">1. 包括形如 <code>Matx??</code>、<code>Vec?</code> 的类型，例如 <code>Matx22f</code><br>2. 对标 OpenCV 的 <code>cv::Matx</code> 和 <code>cv::Vec</code><br>3. 可使用列表初始化和相关静态函数初始化，例如 <code>Matx22f::eye()</code></td></tr><tr><td style="text-align:center;">复合类型</td><td style="text-align:left;">1. 包括 <code>vector</code> 和形如 <code>Point?</code> 的类型<br>2. 对标 C++ 的 <code>std::vector</code> 以及 OpenCV 的<code>cv::Point2?</code> 和 <code>cv::Point3?</code><br>3. 只能使用列表初始化，例如 <code>{1, 2, 3}</code></td></tr><tr><td style="text-align:center;">枚举类型</td><td style="text-align:left;">1. 需要用户自定以 <code>enum</code> 开头和 <code>endenum</code> 结尾的数据类型声明<br>2. 对标 C++ 的有作用域枚举类型 <code>enum class</code><br>3. 变量的定义上与有作用域枚举类型一致，例如 <code>Color COLOR_MODE = Color::RED</code></td></tr></tbody></table></div><p>如果要给某一条参数设置默认值，需要使用 <code>=</code> 完成，不需要默认参数（仅由运行时加载设置）则不需要使用 <code>=</code> 进行赋值，例如</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span>int grab_mode = 1</span></span>
<span class="line"><span>string serial_number</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>如果要给某一参数设置注释信息，请<span style="color:red;">尾置</span> <code>#</code> 并输入相应注释信息，例如</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span>float exposure = 1500 # 相机曝光</span></span>
<span class="line"><span>float gain = 64       # 相机数字增益</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><div class="hint-container tip"><p class="hint-container-title">提示</p><ul><li><code>#</code> 和注释信息之间<u><strong>不必</strong></u>使用空格分隔，例如 <code>#相机曝光</code></li></ul></div><p>枚举类型可在每个枚举项后加上具体的值，也能使用 <code>#</code> 为枚举项添加注释，例如</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span>enum ColorMode # 颜色类型</span></span>
<span class="line"><span>  RED          # 红色</span></span>
<span class="line"><span>  GREEN        # 绿色</span></span>
<span class="line"><span>  BLUE = 4     # 蓝色</span></span>
<span class="line"><span>  GRAY = 5</span></span>
<span class="line"><span>endenum</span></span>
<span class="line"><span></span></span>
<span class="line"><span>ColorMode COLOR = ColorMode::RED # 颜色信息</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3-c-代码生成" tabindex="-1"><a class="header-anchor" href="#_3-c-代码生成"><span>3. C++ 代码生成</span></a></h3><p>从 <code>*.para</code> 到对应的 C++ 代码生成的过程依赖 RMVL 提供的两条 CMake 函数，分别是</p><ul><li><code>rmvl_generate_para</code></li><li><code>rmvl_generate_module_para</code></li></ul><h4 id="_3-1-rmvl-generate-para" tabindex="-1"><a class="header-anchor" href="#_3-1-rmvl-generate-para"><span>3.1 rmvl_generate_para</span></a></h4><div class="hint-container important"><p class="hint-container-title">参考</p><ul><li><a class="route-link" href="/intro/extension/ext_cmake.html#rmvl-generate-para">rmvl_generate_para</a></li></ul></div><p>表示解析当前目录下的 <code>param/mytarget.para</code> 文件，并作为模块 <code>mymodule</code> 的子模块。最终生成的文件是</p><ul><li><code>include/rmvlpara/mymodule/mytarget.h</code>，<code>include/rmvlpara</code> 后文简记为 <code>&lt;prefix&gt;</code></li><li><code>src/para/mytarget.cpp</code></li></ul><p>这样的话会为参数模块汇总的头文件 <code>&lt;prefix&gt;/mymodule.hpp</code> 添加 <code>&lt;prefix&gt;/mymodule/mytarget.h</code> 文件的包含，即会在 <code>&lt;prefix&gt;/mymodule.hpp</code> 中添加</p><div class="language-cpp line-numbers-mode" data-highlighter="shiki" data-ext="cpp" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">#</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">include</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">mymodule/mytarget.h</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>如果 <code>mytarget</code> 需要自成一个模块的话，那么在调用 <code>rmvl_generate_para</code> 函数的时候应该写为</p><div class="language-cmake line-numbers-mode" data-highlighter="shiki" data-ext="cmake" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">rmvl_generate_para(mytarget)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>这样就会生成一个名为 <code>mytarget</code> 的参数模块了，最终生成的文件是</p><ul><li><code>include/rmvlpara/mytarget.hpp</code></li><li><code>src/para/mytarget.cpp</code></li></ul><h4 id="_3-2-rmvl-generate-module-para" tabindex="-1"><a class="header-anchor" href="#_3-2-rmvl-generate-module-para"><span>3.2 rmvl_generate_module_para</span></a></h4><div class="hint-container important"><p class="hint-container-title">参考</p><ul><li><a class="route-link" href="/intro/extension/ext_cmake.html#rmvl-generate-module-para">rmvl_generate_module_para</a></li></ul></div><p>表示将模块 <code>mymodule</code> 中的所有子模块打包至参数模块汇总头文件 <code>&lt;prefix&gt;/mymodule.hpp</code> ，例如，如果在 <code>CMakeLists.txt</code> 中写入</p><div class="language-cmake line-numbers-mode" data-highlighter="shiki" data-ext="cmake" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">rmvl_generate_para(a1 MODULE m)</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">rmvl_generate_para(a2 MODULE m)</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">rmvl_generate_para(a3 MODULE m)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">rmvl_generate_module_para(m)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>最后生成的 <code>&lt;prefix&gt;/m.hpp</code> 中就会包含</p><div class="language-cpp line-numbers-mode" data-highlighter="shiki" data-ext="cpp" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">#</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">include</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">m/a1.h</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">#</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">include</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">m/a2.h</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">#</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">include</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">m/a3.h</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>以上内容均是在 CMake 配置期间自动完成，只需定义好参数规范文件 <code>*.para</code> 以及相应的 CMake 函数即可。</p><h3 id="_4-运行时加载" tabindex="-1"><a class="header-anchor" href="#_4-运行时加载"><span>4. 运行时加载</span></a></h3><h4 id="_4-1-加载方式" tabindex="-1"><a class="header-anchor" href="#_4-1-加载方式"><span>4.1 加载方式</span></a></h4><p>例如，对于以下的 <code>test.para</code> 文件</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span>int abc = 10 # 测试数</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>在使用 <code>rmvl_generate_para(test)</code> 之后，生成的头文件代码中，类相关的代码如下</p><div class="language-cpp line-numbers-mode" data-highlighter="shiki" data-ext="cpp" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">//! TestParam 参数模块</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">class</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> RMVL_EXPORTS_W</span><span style="--shiki-light:#2E8F82;--shiki-dark:#5DA994;"> TestParam</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> {</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">public</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">    //! 测试数 </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">@note</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> 默认值：`10`</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">    RMVL_W_RW </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">int</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> abc </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 10</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">    //! 创建 TestParam 参数对象 </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">@warning</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> 不建议手动创建对象</span></span>
<span class="line"><span style="--shiki-light:#2E8F82;--shiki-dark:#5DA994;">    RMVL_W</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> TestParam</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">()</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> =</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> default</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">    /**</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">     * </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">@brief</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> 从指定 `YAML` 文件中加载，并读取至 `TestParam` 中</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">     *</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">     * </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">@note</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> `YAML` 文件的后缀允许是 `*.yml` 和 `*.yaml`</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">     * </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">@param</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">[</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">in</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">] </span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">path</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> 参数路径</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">     * </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">@return</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> 是否读取成功</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">     */</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">    RMVL_W </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">bool</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> read</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">const</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> std</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">::</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">string </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&amp;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">path</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">    /**</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">     * </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">@brief</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> 将 `TestParam` 的数据写入指定的 `YAML` 文件中</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">     *</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">     * </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">@note</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> `YAML` 文件的后缀允许是 `*.yml` 和 `*.yaml`</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">     * </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">@param</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">[</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">in</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">] </span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">path</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> 参数路径</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">     * </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">@return</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> 是否写入成功</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">     */</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">    RMVL_W </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">bool</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> write</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">const</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> std</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">::</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">string </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&amp;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">path</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> const</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">};</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">//! TestParam 参数模块</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">inline</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> TestParam test_param</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>其中包含了运行时参数导入和导出的接口 <code>read</code> 和 <code>write</code>，以 algorithm 的参数模块为例，<code>rm::para::AlgorithmParam::read</code> 用于运行时读取 YAML 文件并配置 algorithm 模块的参数，<code>rm::para::AlgorithmParam::write</code> 用于将当前 algorithm 模块的参数写入到 YAML 文件中。</p><p>用户可以通过使用类似以下的代码完成运行时加载</p><div class="language-cpp line-numbers-mode" data-highlighter="shiki" data-ext="cpp" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">/* code */</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">rm</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">::</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">para</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">::</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">algorithm_param</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">read</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">prefix_path </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">+</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">algorithm.yml</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">);</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">/* code */</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_4-2-yaml-文件格式" tabindex="-1"><a class="header-anchor" href="#_4-2-yaml-文件格式"><span>4.2 YAML 文件格式</span></a></h4><p>对于某个 <code>*.para</code> 文件中的参数，可以通过 YAML 文件进行运行时配置，例如</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span>int num = 10      # Test number</span></span>
<span class="line"><span>float value = 4.2 # Test value</span></span>
<span class="line"><span>string name       # Test name</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>对应的 YAML 文件可以写为</p><div class="language-yaml line-numbers-mode" data-highlighter="shiki" data-ext="yaml" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># test.yml</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">%</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">YAML</span><span style="--shiki-light:#B31D28;--shiki-light-font-style:italic;--shiki-dark:#FDAEB7;--shiki-dark-font-style:italic;">:1.0</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">---</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">num</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 20</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">name</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">Hello, RMVL</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>在程序调用</p><div class="language-cpp line-numbers-mode" data-highlighter="shiki" data-ext="cpp" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">rm</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">::</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">para</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">::</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">test_param</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">read</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">prefix_path </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">+</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">test.yml</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">);</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>时，会实时加载该 YAML 文件，此时</p><ul><li><code>num</code> 的值会被设置为 <code>20</code></li><li><code>name</code> 的值会被设置为 <code>Hello, RMVL</code></li><li><code>value</code> 在 YAML 文件中为设置该值，因此 <code>value</code> 的值会保持不变，即为默认的 <code>4.2</code></li></ul><p>可以使用 <code>rmvl_generate_para</code> CMake 宏生成参数模块的 C/C++ 文件，例如原先的文件架构为</p><div class="language- line-numbers-mode has-collapsed-lines collapsed" data-highlighter="shiki" data-ext="" style="--vp-collapsed-lines:15;--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span>.</span></span>
<span class="line"><span>├── CMakeLists.txt</span></span>
<span class="line"><span>├── include</span></span>
<span class="line"><span>│   └── rmvl</span></span>
<span class="line"><span>│       ├── aa</span></span>
<span class="line"><span>│       │   ├── a1.hpp</span></span>
<span class="line"><span>│       │   └── a2.hpp</span></span>
<span class="line"><span>│       └── aa.hpp</span></span>
<span class="line"><span>├── param</span></span>
<span class="line"><span>│   └── a1.para</span></span>
<span class="line"><span>└── src</span></span>
<span class="line"><span>    ├── a1</span></span>
<span class="line"><span>    │   └── a1.cpp</span></span>
<span class="line"><span>    └── a2</span></span>
<span class="line"><span>        ├── a2_impl.cpp</span></span>
<span class="line"><span>        └── a2.cpp</span></span>
<span class="line"><span></span></span>
<span class="line"><span>7 directories, 8 files</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div><div class="collapsed-lines"></div></div><p>其中 <code>a1.para</code> 是希望用于生成参数模块 C/C++ 文件的参数规范文件。</p><p>在 CMakeLists.txt 中添加模块（一般是 <code>add_library(aa XXX)</code> 或者 RMVL 中的 <code>rmvl_add_module(aa XXX)</code>）之前的位置写上</p><div class="language-cmake line-numbers-mode" data-highlighter="shiki" data-ext="cmake" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">rmvl_generate_para(</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">  a1</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">  MODULE aa</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>即可生成 <code>aa/a1</code> 的参数模块，在文件末尾写上</p><div class="language-cmake line-numbers-mode" data-highlighter="shiki" data-ext="cmake" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">rmvl_generate_module_para(aa)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>即可生成 <code>aa</code> 参数模块的汇总头文件。</p><p>运行 <code>cmake ..</code> 后的文件结构如下</p><div class="language- line-numbers-mode has-collapsed-lines collapsed" data-highlighter="shiki" data-ext="" style="--vp-collapsed-lines:15;--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span>.</span></span>
<span class="line"><span>├── CMakeLists.txt</span></span>
<span class="line"><span>├── include</span></span>
<span class="line"><span>│   ├── rmvl</span></span>
<span class="line"><span>│   │   ├── aa</span></span>
<span class="line"><span>│   │   │   ├── a1.hpp</span></span>
<span class="line"><span>│   │   │   └── a2.hpp</span></span>
<span class="line"><span>│   │   └── aa.hpp</span></span>
<span class="line"><span>│   └── rmvlpara</span></span>
<span class="line"><span>│       ├── aa</span></span>
<span class="line"><span>│       │   └── a1.h</span></span>
<span class="line"><span>│       └── aa.hpp</span></span>
<span class="line"><span>├── param</span></span>
<span class="line"><span>│   └── a1.para</span></span>
<span class="line"><span>└── src</span></span>
<span class="line"><span>    ├── a1</span></span>
<span class="line"><span>    │   ├── a1.cpp</span></span>
<span class="line"><span>    │   └── para</span></span>
<span class="line"><span>    │       └── param.cpp</span></span>
<span class="line"><span>    └── a2</span></span>
<span class="line"><span>        ├── a2_impl.cpp</span></span>
<span class="line"><span>        └── a2.cpp</span></span>
<span class="line"><span></span></span>
<span class="line"><span>9 directories, 10 files</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div><div class="collapsed-lines"></div></div><p>其中新生成的文件为 <code>include/rmvlpara/**</code> 和 <code>src/a1/para/**</code>。</p></div><!----><!----><!----></div></main><footer class="vp-doc-footer" data-v-7293e39a data-v-fda6bbae><!--[--><!--]--><!----><div class="contributors" aria-label="Contributors" data-v-fda6bbae><span class="contributors-label" data-v-fda6bbae>贡献者: </span><span class="contributors-info" data-v-fda6bbae><!--[--><!--[--><span class="contributor" data-v-fda6bbae>zhaoxi</span><!----><!--]--><!--]--></span></div><nav class="prev-next" data-v-fda6bbae><div class="pager" data-v-fda6bbae><a class="vp-link no-icon link pager-link prev" href="/intro/repo/02.html" data-v-fda6bbae data-v-442a52aa><!--[--><span class="desc" data-v-fda6bbae>上一页</span><span class="title" data-v-fda6bbae>【02】扩展模块</span><!--]--><!----></a></div><div class="pager" data-v-fda6bbae><a class="vp-link no-icon link pager-link next" href="/intro/extension/" data-v-fda6bbae data-v-442a52aa><!--[--><span class="desc" data-v-fda6bbae>下一页</span><span class="title" data-v-fda6bbae>Visual Studio Code 插件</span><!--]--><!----></a></div></nav></footer><!----><!--[--><!--]--></div></div></div><!--[--><!--]--></div></div><!--]--><button style="display:none;" type="button" class="vp-back-to-top" aria-label="back to top" data-v-68cd6b44 data-v-f098172b><span class="percent" data-allow-mismatch data-v-f098172b>0%</span><span class="show icon vpi-back-to-top" data-v-f098172b></span><svg aria-hidden="true" data-v-f098172b><circle cx="50%" cy="50%" data-allow-mismatch style="stroke-dasharray:calc(0% - 12.566370614359172px) calc(314.1592653589793% - 12.566370614359172px);" data-v-f098172b></circle></svg></button><footer class="vp-footer has-sidebar" vp-footer data-v-68cd6b44 data-v-400675cf><!--[--><div class="container" data-v-400675cf><p class="message" data-v-400675cf>Powered by <a target="_blank" href="https://v2.vuepress.vuejs.org/">VuePress</a> & <a target="_blank" href="https://theme-plume.vuejs.press">vuepress-theme-plume</a></p><!----></div><!--]--></footer><!--[--><!--]--><!--]--></div><!----><!--]--><!--[--><!--]--><!--]--></div><script type="module" src="/assets/app-CPCbhr2f.js" defer></script></body></html>