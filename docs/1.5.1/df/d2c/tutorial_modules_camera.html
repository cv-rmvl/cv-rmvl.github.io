<!-- HTML header for doxygen 1.8.6-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.13.2"/>
<title>RMVL: 相机设备</title>
<link href="../../rmvl-logo-small.png" rel="shortcut icon" type="image/x-icon" />
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<script type="text/javascript" src="../../tutorial-utils.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../cookie.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  extensions: ["tex2jax.js"],
  jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
<link href="../../doxygen-awesome.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<!--#include virtual="/google-search.html"-->
<script type="text/javascript" src="/docs/version.js"></script>
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="../../rmvl-logo.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">RMVL
   &#160;<span id="projectnumber">1.5.1</span>
   </div>
   <div id="projectbrief">Robotic Manipulation and Vision Library</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- 制作者 Doxygen 1.13.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(1); });
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('../../',true,false,'search.php','搜索',false);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){ initResizable(false); });
/* @license-end */
</script>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">载入中...</div>
<div class="SRStatus" id="Searching">搜索中...</div>
<div class="SRStatus" id="NoMatches">未找到</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../dd/da0/tutorials.html">RMVL 使用教程</a></li><li class="navelem"><a class="el" href="../../d6/d6e/tutorial_table_of_content_modules.html">主要模块使用教程</a></li>  </ul>
</div>
</div><!-- top -->
<div id="doc-content">
<div><div class="header">
  <div class="headertitle"><div class="title">相机设备</div></div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>目录</h3>
<ul>
  <li class="level1">
    <a href="#autotoc_md235">1. 如何使用</a>
    <ul>
      <li class="level2">
        <a href="#autotoc_md236">1.1 初始化</a>
      </li>
      <li class="level2">
        <a href="#autotoc_md237">1.2 光学参数设置</a>
        <ul>
          <li class="level3">
            <a href="#autotoc_md238">1.2.1 曝光设置</a>
          </li>
          <li class="level3">
            <a href="#autotoc_md239">1.2.2 白平衡设置</a>
          </li>
          <li class="level3">
            <a href="#autotoc_md240">1.2.3 其余光学参数设置</a>
          </li>
        </ul>
      </li>
      <li class="level2">
        <a href="#autotoc_md241">1.3 处理参数设置</a>
      </li>
      <li class="level2">
        <a href="#autotoc_md242">1.4 事件设置</a>
      </li>
    </ul>
  </li>
  <li class="level1">
    <a href="#autotoc_md243">2. para 参数加载</a>
  </li>
  <li class="level1">
    <a href="#autotoc_md244">3. 示例程序</a>
    <ul>
      <li class="level2">
        <a href="#autotoc_md245">3.1 单相机</a>
      </li>
      <li class="level2">
        <a href="#autotoc_md246">3.2 多相机</a>
      </li>
      <li class="level2">
        <a href="#autotoc_md247">3.3 相机录屏</a>
      </li>
      <li class="level2">
        <a href="#autotoc_md248">3.4 相机标定</a>
      </li>
    </ul>
  </li>
  <li class="level1">
    <a href="#autotoc_md249">4. 使用 Demo</a>
  </li>
</ul>
</div>
<div class="textblock"><p>相机模块的基本使用，包括初始化、参数设置以及运行示例</p>
<p><a class="anchor" id="md__2home_2zhaoxi_2_xE6_xA1_x8C_xE9_x9D_xA2_2Vision_2cv-rmvl_2rmvl_2doc_2tutorials_2modules_2tools_2camera"></a></p>
<dl class="section author"><dt>作者</dt><dd>赵曦 </dd></dl>
<dl class="section date"><dt>日期</dt><dd>2023/03/15 </dd></dl>
<p><b>上一篇教程：</b><a class="el" href="../../db/dba/tutorial_modules_opcua.html">工业自动化通信协议 OPC UA</a> ↑<br  />
 <b>下一篇教程：</b><a class="el" href="../../dc/d10/tutorial_modules_light.html">光源控制器</a> ↓<br  />
</p>
<hr  />
<p>相关类</p><ul>
<li>迈德威视工业相机 <a class="el" href="../../de/de8/classrm_1_1MvCamera.html" title="迈德威视相机库">rm::MvCamera</a></li>
<li>海康机器人工业相机 <a class="el" href="../../db/d9f/classrm_1_1HikCamera.html" title="海康机器人相机库">rm::HikCamera</a></li>
<li>奥普特机器视觉工业相机 <a class="el" href="../../d1/d9c/classrm_1_1OptCamera.html" title="奥普特机器视觉相机库">rm::OptCamera</a></li>
</ul>
<h1><a class="anchor" id="autotoc_md235"></a>
1. 如何使用</h1>
<p>使用前需安装相机驱动，详情参考：<a class="el" href="../../d1/db4/tutorial_install.html">构建并安装 RMVL</a></p>
<h2><a class="anchor" id="autotoc_md236"></a>
1.1 初始化</h2>
 <div class='newInnerHTML'>MindVision 工业相机</div><div> <script type='text/javascript'> addToggle(); </script><p>创建 MvCamera 对象即可初始化相机，例如：</p>
<div class="fragment"><div class="line"><a class="code hl_class" href="../../de/de8/classrm_1_1MvCamera.html">rm::MvCamera</a> capture1(<a class="code hl_function" href="../../df/dfa/structrm_1_1CameraConfig.html#a1a285fd4742e8ced4907f83d520c943b">rm::CameraConfig::create</a>(<a class="code hl_enumvalue" href="../../dc/d90/group__camera.html#gga90ca2fddbb5f19ea4dc6f862157be49da535863a82f163709557e59e2eb8139a7">rm::GrabMode::Continuous</a>, <a class="code hl_enumvalue" href="../../dc/d90/group__camera.html#gga034d81b381d7c04ba4549cf3533750ffaf20e3c5e54c0ab3d375d660b3f896f6a">rm::RetrieveMode::SDK</a>), <span class="stringliteral">&quot;0123456789&quot;</span>);</div>
<div class="line"><a class="code hl_class" href="../../de/de8/classrm_1_1MvCamera.html">rm::MvCamera</a> capture2(<a class="code hl_function" href="../../df/dfa/structrm_1_1CameraConfig.html#a1a285fd4742e8ced4907f83d520c943b">rm::CameraConfig::create</a>(<a class="code hl_enumvalue" href="../../dc/d90/group__camera.html#gga90ca2fddbb5f19ea4dc6f862157be49da719d067b229178f03bcfa1da4ac4dede">rm::GrabMode::Software</a>, <a class="code hl_enumvalue" href="../../dc/d90/group__camera.html#gga034d81b381d7c04ba4549cf3533750ffa5bd4c87976f48e6a53919d53e14025e9">rm::RetrieveMode::OpenCV</a>), <span class="stringliteral">&quot;0123456789&quot;</span>);</div>
<div class="ttc" id="aclassrm_1_1MvCamera_html"><div class="ttname"><a href="../../de/de8/classrm_1_1MvCamera.html">rm::MvCamera</a></div><div class="ttdoc">迈德威视相机库</div><div class="ttdef"><b>定义</b> mv_camera.h:36</div></div>
<div class="ttc" id="agroup__camera_html_gga034d81b381d7c04ba4549cf3533750ffa5bd4c87976f48e6a53919d53e14025e9"><div class="ttname"><a href="../../dc/d90/group__camera.html#gga034d81b381d7c04ba4549cf3533750ffa5bd4c87976f48e6a53919d53e14025e9">rm::RetrieveMode::OpenCV</a></div><div class="ttdeci">@ OpenCV</div><div class="ttdoc">使用 OpenCV 的 &#39;cvtColor&#39; 进行处理</div><div class="ttdef"><b>定义</b> camutils.hpp:52</div></div>
<div class="ttc" id="agroup__camera_html_gga034d81b381d7c04ba4549cf3533750ffaf20e3c5e54c0ab3d375d660b3f896f6a"><div class="ttname"><a href="../../dc/d90/group__camera.html#gga034d81b381d7c04ba4549cf3533750ffaf20e3c5e54c0ab3d375d660b3f896f6a">rm::RetrieveMode::SDK</a></div><div class="ttdeci">@ SDK</div><div class="ttdoc">使用官方 SDK 进行处理</div><div class="ttdef"><b>定义</b> camutils.hpp:53</div></div>
<div class="ttc" id="agroup__camera_html_gga90ca2fddbb5f19ea4dc6f862157be49da535863a82f163709557e59e2eb8139a7"><div class="ttname"><a href="../../dc/d90/group__camera.html#gga90ca2fddbb5f19ea4dc6f862157be49da535863a82f163709557e59e2eb8139a7">rm::GrabMode::Continuous</a></div><div class="ttdeci">@ Continuous</div><div class="ttdoc">连续采样</div><div class="ttdef"><b>定义</b> camutils.hpp:34</div></div>
<div class="ttc" id="agroup__camera_html_gga90ca2fddbb5f19ea4dc6f862157be49da719d067b229178f03bcfa1da4ac4dede"><div class="ttname"><a href="../../dc/d90/group__camera.html#gga90ca2fddbb5f19ea4dc6f862157be49da719d067b229178f03bcfa1da4ac4dede">rm::GrabMode::Software</a></div><div class="ttdeci">@ Software</div><div class="ttdoc">软触发</div><div class="ttdef"><b>定义</b> camutils.hpp:35</div></div>
<div class="ttc" id="astructrm_1_1CameraConfig_html_a1a285fd4742e8ced4907f83d520c943b"><div class="ttname"><a href="../../df/dfa/structrm_1_1CameraConfig.html#a1a285fd4742e8ced4907f83d520c943b">rm::CameraConfig::create</a></div><div class="ttdeci">static CameraConfig create(Args &amp;&amp;...modes)</div><div class="ttdoc">创建相机初始化配置模式</div><div class="ttdef"><b>定义</b> camutils.hpp:70</div></div>
</div><!-- fragment --> </div>  <div class='newInnerHTML'>HikRobot 工业相机</div><div> <script type='text/javascript'> addToggle(); </script><p>创建 HikCamera 对象即可初始化相机，例如：</p>
<div class="fragment"><div class="line"><a class="code hl_class" href="../../db/d9f/classrm_1_1HikCamera.html">rm::HikCamera</a> capture1(<a class="code hl_function" href="../../df/dfa/structrm_1_1CameraConfig.html#a1a285fd4742e8ced4907f83d520c943b">rm::CameraConfig::create</a>(<a class="code hl_enumvalue" href="../../dc/d90/group__camera.html#gga90ca2fddbb5f19ea4dc6f862157be49da535863a82f163709557e59e2eb8139a7">rm::GrabMode::Continuous</a>, <a class="code hl_enumvalue" href="../../dc/d90/group__camera.html#gga034d81b381d7c04ba4549cf3533750ffaf20e3c5e54c0ab3d375d660b3f896f6a">rm::RetrieveMode::SDK</a>), <span class="stringliteral">&quot;0123456789&quot;</span>);</div>
<div class="line"><a class="code hl_class" href="../../db/d9f/classrm_1_1HikCamera.html">rm::HikCamera</a> capture2(<a class="code hl_function" href="../../df/dfa/structrm_1_1CameraConfig.html#a1a285fd4742e8ced4907f83d520c943b">rm::CameraConfig::create</a>(<a class="code hl_enumvalue" href="../../dc/d90/group__camera.html#gga90ca2fddbb5f19ea4dc6f862157be49da719d067b229178f03bcfa1da4ac4dede">rm::GrabMode::Software</a>, <a class="code hl_enumvalue" href="../../dc/d90/group__camera.html#gga034d81b381d7c04ba4549cf3533750ffa5bd4c87976f48e6a53919d53e14025e9">rm::RetrieveMode::OpenCV</a>), <span class="stringliteral">&quot;0123456789&quot;</span>);</div>
<div class="ttc" id="aclassrm_1_1HikCamera_html"><div class="ttname"><a href="../../db/d9f/classrm_1_1HikCamera.html">rm::HikCamera</a></div><div class="ttdoc">海康机器人相机库</div><div class="ttdef"><b>定义</b> hik_camera.h:35</div></div>
</div><!-- fragment --> </div>  <div class='newInnerHTML'>OPT 奥普特工业相机</div><div> <script type='text/javascript'> addToggle(); </script><p>创建 OptCamera 对象即可初始化相机，例如：</p>
<div class="fragment"><div class="line"><a class="code hl_class" href="../../d1/d9c/classrm_1_1OptCamera.html">rm::OptCamera</a> capture1(<a class="code hl_function" href="../../df/dfa/structrm_1_1CameraConfig.html#a1a285fd4742e8ced4907f83d520c943b">rm::CameraConfig::create</a>(<a class="code hl_enumvalue" href="../../dc/d90/group__camera.html#gga0a7fc1f9340aca49db5826b726c100a3aa12a3079e14ced46e69ba52b8a90b21a">rm::HandleMode::IP</a>,</div>
<div class="line">                                                <a class="code hl_enumvalue" href="../../dc/d90/group__camera.html#gga90ca2fddbb5f19ea4dc6f862157be49da535863a82f163709557e59e2eb8139a7">rm::GrabMode::Continuous</a>,</div>
<div class="line">                                                <a class="code hl_enumvalue" href="../../dc/d90/group__camera.html#gga034d81b381d7c04ba4549cf3533750ffaf20e3c5e54c0ab3d375d660b3f896f6a">rm::RetrieveMode::SDK</a>),</div>
<div class="line">                       <span class="stringliteral">&quot;192.168.1.100&quot;</span>);</div>
<div class="line"><a class="code hl_class" href="../../d1/d9c/classrm_1_1OptCamera.html">rm::OptCamera</a> capture2(<a class="code hl_function" href="../../df/dfa/structrm_1_1CameraConfig.html#a1a285fd4742e8ced4907f83d520c943b">rm::CameraConfig::create</a>(<a class="code hl_enumvalue" href="../../dc/d90/group__camera.html#gga0a7fc1f9340aca49db5826b726c100a3a88fa71f0a6e0dfedbb46d91cc0b37a50">rm::HandleMode::Index</a>,</div>
<div class="line">                                                <a class="code hl_enumvalue" href="../../dc/d90/group__camera.html#gga90ca2fddbb5f19ea4dc6f862157be49da535863a82f163709557e59e2eb8139a7">rm::GrabMode::Continuous</a>,</div>
<div class="line">                                                <a class="code hl_enumvalue" href="../../dc/d90/group__camera.html#gga034d81b381d7c04ba4549cf3533750ffaf20e3c5e54c0ab3d375d660b3f896f6a">rm::RetrieveMode::SDK</a>),</div>
<div class="line">                       <span class="stringliteral">&quot;1&quot;</span>);</div>
<div class="ttc" id="aclassrm_1_1OptCamera_html"><div class="ttname"><a href="../../d1/d9c/classrm_1_1OptCamera.html">rm::OptCamera</a></div><div class="ttdoc">奥普特机器视觉相机库</div><div class="ttdef"><b>定义</b> opt_camera.h:31</div></div>
<div class="ttc" id="agroup__camera_html_gga0a7fc1f9340aca49db5826b726c100a3a88fa71f0a6e0dfedbb46d91cc0b37a50"><div class="ttname"><a href="../../dc/d90/group__camera.html#gga0a7fc1f9340aca49db5826b726c100a3a88fa71f0a6e0dfedbb46d91cc0b37a50">rm::HandleMode::Index</a></div><div class="ttdeci">@ Index</div><div class="ttdoc">相机的索引号 (0, 1, 2 ...)</div><div class="ttdef"><b>定义</b> camutils.hpp:43</div></div>
<div class="ttc" id="agroup__camera_html_gga0a7fc1f9340aca49db5826b726c100a3aa12a3079e14ced46e69ba52b8a90b21a"><div class="ttname"><a href="../../dc/d90/group__camera.html#gga0a7fc1f9340aca49db5826b726c100a3aa12a3079e14ced46e69ba52b8a90b21a">rm::HandleMode::IP</a></div><div class="ttdeci">@ IP</div><div class="ttdoc">IP 地址</div><div class="ttdef"><b>定义</b> camutils.hpp:46</div></div>
</div><!-- fragment -->  </div> <p>第 1 个参数为 <b>相机初始化模式</b> ，包含</p>
<ul>
<li>相机外部触发通道</li>
<li>相机采集模式</li>
<li>相机句柄创建方式</li>
<li>相机数据处理模式</li>
</ul>
<p>4 个待配置的数据，见下表</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadCenter" width="140">初始化配置模式 </th><th class="markdownTableHeadCenter" width="120">含义 </th><th class="markdownTableHeadCenter" width="190">标识符 </th><th class="markdownTableHeadCenter">功能  </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyCenter" rowspan="4">相机外部触发通道 </td><td class="markdownTableBodyCenter">通道 0 </td><td class="markdownTableBodyCenter"><code>TriggerChannel::Chn0</code> </td><td class="markdownTableBodyCenter">通道 0 生效  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyCenter">通道 1 </td><td class="markdownTableBodyCenter"><code>TriggerChannel::Chn1</code> </td><td class="markdownTableBodyCenter">通道 1 生效  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyCenter">通道 2 </td><td class="markdownTableBodyCenter"><code>TriggerChannel::Chn2</code> </td><td class="markdownTableBodyCenter">通道 2 生效  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyCenter">通道 3 </td><td class="markdownTableBodyCenter"><code>TriggerChannel::Chn3</code> </td><td class="markdownTableBodyCenter">通道 3 生效  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyCenter" rowspan="3">采集方式 </td><td class="markdownTableBodyCenter">连续采集 </td><td class="markdownTableBodyCenter"><code>GrabMode::Continuous</code> </td><td class="markdownTableBodyCenter">连续触发相机，当 <code>grab</code> 方法被执行后，相机将开始连续采集，一般调用 <code>read</code> 或在相机构造之初可自动开启相机 Grabbing。  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyCenter">软触发 </td><td class="markdownTableBodyCenter"><code>GrabMode::Software</code> </td><td class="markdownTableBodyCenter">软件触发，需要手动设置触发帧，当相机开始取流（Grabbing）时，只有在被设置触发帧之后的下一次执行有效，否则会阻塞以等待接收到触发帧，RMVL 相机库目前仅支持同步的相机数据处理，在指定时间内如果没有收到触发帧，则会被认为相机读取 <code>read</code> 失败。  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyCenter">硬触发 </td><td class="markdownTableBodyCenter"><code>GrabMode::Hardware</code> </td><td class="markdownTableBodyCenter">硬件触发，通过向相机的航空接头等串行通信接口传输高低电平信号来设置触发帧，信号的有效性可通过软件设置，例如设置高电平、低电平、上升边沿、下降边沿的一种为触发方式，有关相机取流的细节同软触发。  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyCenter" rowspan="4">相机句柄模式 </td><td class="markdownTableBodyCenter">索引号 </td><td class="markdownTableBodyCenter"><code>HandleMode::Index</code> </td><td class="markdownTableBodyCenter">相机的索引号 <code>(0, 1, 2 ...)</code>  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyCenter">序列号 </td><td class="markdownTableBodyCenter"><code>HandleMode::Key</code> </td><td class="markdownTableBodyCenter">制造商：序列号 S/N  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyCenter">ID </td><td class="markdownTableBodyCenter"><code>HandleMode::ID</code> </td><td class="markdownTableBodyCenter">手动设置的相机 ID  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyCenter">IP </td><td class="markdownTableBodyCenter"><code>HandleMode::IP</code> </td><td class="markdownTableBodyCenter">IP 地址，形如 <code>192.168.1.100</code>  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyCenter" rowspan="2">相机数据处理模式 </td><td class="markdownTableBodyCenter">使用 OpenCV </td><td class="markdownTableBodyCenter"><code>RetrieveMode::OpenCV</code> </td><td class="markdownTableBodyCenter">OpenCV 的 <code>imgproc</code> 模块提供了有关数据处理的接口，例如 <code>cv::cvtColor</code> 可以用于色彩空间转换  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyCenter">使用厂商 SDK </td><td class="markdownTableBodyCenter"><code>RetrieveMode::SDK</code> </td><td class="markdownTableBodyCenter">SDK 中提供了有关数据处理的接口，主要用于相机解码、色彩空间转换等操作  </td></tr>
</table>
<p>详细的触发方式 </p><dl class="section see"><dt>参见</dt><dd></dd></dl>
<ul>
<li><a href="https://vision.scutbot.cn/HikRobot/index.html" target="_blank">HIKROBOT 工业相机用户手册</a></li>
<li><a href="https://vision.scutbot.cn/Mv/mv.pdf" target="_blank">迈德威视工业相机用户手册</a></li>
</ul>
<h2><a class="anchor" id="autotoc_md237"></a>
1.2 光学参数设置</h2>
<h3><a class="anchor" id="autotoc_md238"></a>
1.2.1 曝光设置</h3>
<p>手动/自动设置曝光</p>
<div class="fragment"><div class="line">capture.set(CAMERA_MANUAL_EXPOSURE); <span class="comment">// 手动曝光</span></div>
<div class="line">capture.set(CAMERA_AUTO_EXPOSURE);   <span class="comment">// 自动曝光</span></div>
</div><!-- fragment --><p>设置曝光值</p>
<div class="fragment"><div class="line">capture.set(CAMERA_EXPOSURE, 600); <span class="comment">// 设置曝光值为 600</span></div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md239"></a>
1.2.2 白平衡设置</h3>
<p>手动/自动设置白平衡</p>
<div class="fragment"><div class="line">capture.set(CAMERA_MANUAL_WB); <span class="comment">// 手动白平衡</span></div>
<div class="line">capture.set(CAMERA_AUTO_WB);   <span class="comment">// 自动白平衡</span></div>
</div><!-- fragment --><p>设置各通道增益，并生效（在手动设置白平衡模式下有效）</p>
<div class="fragment"><div class="line">capture.set(CAMERA_WB_RGAIN, 102); <span class="comment">// 红色通道增益设置为 102</span></div>
<div class="line">capture.set(CAMERA_WB_GGAIN, 101); <span class="comment">// 绿色通道增益设置为 101</span></div>
<div class="line">capture.set(CAMERA_WB_BGAIN, 100); <span class="comment">// 蓝色通道增益设置为 100</span></div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md240"></a>
1.2.3 其余光学参数设置</h3>
<div class="fragment"><div class="line">capture.set(CAMERA_GAIN, 64);        <span class="comment">// 设置模拟增益为 64</span></div>
<div class="line">capture.set(CAMERA_GAMMA, 80);       <span class="comment">// 设置 Gamma 为 80</span></div>
<div class="line">capture.set(CAMERA_CONTRAST, 120);   <span class="comment">// 设置对比度为 120</span></div>
<div class="line">capture.set(CAMERA_SATURATION, 100); <span class="comment">// 设置饱和度为 100</span></div>
<div class="line">capture.set(CAMERA_SHARPNESS, 100);  <span class="comment">// 设置锐度为 100</span></div>
</div><!-- fragment --><dl class="section note"><dt>注解</dt><dd>Hik 工业相机暂不支持修改 Gamma</dd></dl>
<h2><a class="anchor" id="autotoc_md241"></a>
1.3 处理参数设置</h2>
<div class="fragment"><div class="line"><span class="comment">// 设置硬触发采集延迟为 1000 μs，仅在硬触发模式下有效</span></div>
<div class="line">capture.set(CAMERA_TRIGGER_DELAY, 1000);</div>
<div class="line"><span class="comment">// 设置单次触发时的触发帧数为 5 帧，即一次触发能触发 5 帧画面，仅在触发模式下有效</span></div>
<div class="line">capture.set(CAMERA_TRIGGER_COUNT, 5);</div>
<div class="line"><span class="comment">// 设置单次触发时多次采集的周期为 100 μs，即一次触发信号能触发多帧画面，每帧间隔为 100 μs</span></div>
<div class="line">capture.set(CAMERA_TRIGGER_PERIOD, 100);</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md242"></a>
1.4 事件设置</h2>
<div class="fragment"><div class="line">capture.set(CAMERA_ONCE_WB);      <span class="comment">// 执行一次白平衡操作，仅在手动白平衡模式下有效</span></div>
<div class="line">capture.set(CAMERA_TRIGGER_SOFT); <span class="comment">// 执行一次软触发，仅在软触发模式下有效</span></div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md243"></a>
2. para 参数加载</h1>
<p>RMVL 提供了全局的相机参数对象: para::camera_param ，详情可参考类 para::CameraParam</p>
<h1><a class="anchor" id="autotoc_md244"></a>
3. 示例程序</h1>
<p>在构建 RMVL 时，需开启 <code>BUILD_EXAMPLES</code> 选项（默认开启）</p>
<div class="fragment"><div class="line">cmake -DBUILD_EXAMPLES=ON ..</div>
<div class="line">cmake --build . --parallel 4</div>
<div class="line">cd build</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md245"></a>
3.1 单相机</h2>
<p>单相机例程，在 build 文件夹下执行以下命令</p>
 <div class='newInnerHTML'>MindVision 工业相机</div><div> <script type='text/javascript'> addToggle(); </script> <div class="fragment"><div class="line">bin/sample_mv_mono</div>
</div><!-- fragment -->  </div>   <div class='newInnerHTML'>HikRobot 工业相机</div><div> <script type='text/javascript'> addToggle(); </script> <div class="fragment"><div class="line">bin/sample_hik_mono</div>
</div><!-- fragment -->  </div> <p>相机按照连续采样、<code>cvtColor</code> 处理方式运行，程序运行中，<code>cv::waitKey(1)</code> 接受到 <code>s</code> 键被按下时，可将参数保存到 <code>out_para.yml</code> 文件中。</p>
<p>键入一次 <code>Esc</code> 可暂停程序，按其余键可恢复。键入两次 <code>Esc</code> 可退出程序。</p>
<h2><a class="anchor" id="autotoc_md246"></a>
3.2 多相机</h2>
<p>多相机例程，在 <code>build</code> 文件夹下执行以下命令</p>
 <div class='newInnerHTML'>MindVision 工业相机</div><div> <script type='text/javascript'> addToggle(); </script> <div class="fragment"><div class="line">bin/sample_mv_multi</div>
</div><!-- fragment -->  </div>   <div class='newInnerHTML'>HikRobot 工业相机</div><div> <script type='text/javascript'> addToggle(); </script> <div class="fragment"><div class="line">bin/sample_hik_multi</div>
</div><!-- fragment -->  </div> <p>相机按照连续采样、<code>cvtColor</code> 处理方式运行，程序会枚举所有的相机设备，并可视化的显示出来，指定一个序列号来启动某一相机。</p>
<p>程序运行过程中，相机参数会自动从 <code>out_para.yml</code> 中加载，若没有则会按照默认值运行。</p>
<p>键入一次 <code>Esc</code> 可暂停程序，按其余键可恢复。键入两次 <code>Esc</code> 可退出程序。</p>
<h2><a class="anchor" id="autotoc_md247"></a>
3.3 相机录屏</h2>
<p>相机录屏例程，在 build 文件夹下执行以下命令</p>
 <div class='newInnerHTML'>MindVision 工业相机</div><div> <script type='text/javascript'> addToggle(); </script> <div class="fragment"><div class="line">bin/rmvl_mv_writer</div>
</div><!-- fragment -->  </div>   <div class='newInnerHTML'>HikRobot 工业相机</div><div> <script type='text/javascript'> addToggle(); </script> <div class="fragment"><div class="line">bin/rmvl_hik_writer</div>
</div><!-- fragment -->  </div> <p>相机按照连续采样、<code>cvtColor</code> 处理方式运行，<code>-o</code> 可指定输出文件名，否则默认输出到 <code>ts.avi</code>，例如</p>
 <div class='newInnerHTML'>MindVision 工业相机</div><div> <script type='text/javascript'> addToggle(); </script> <div class="fragment"><div class="line">bin/rmvl_mv_writer -o=aaa.avi</div>
</div><!-- fragment -->  </div>   <div class='newInnerHTML'>HikRobot 工业相机</div><div> <script type='text/javascript'> addToggle(); </script> <div class="fragment"><div class="line">bin/rmvl_hik_writer -o=aaa.avi</div>
</div><!-- fragment -->  </div> <p>程序运行过程中，相机参数会自动从 <code>out_para.yml</code> 中加载，若没有则会按照默认值运行。</p>
<h2><a class="anchor" id="autotoc_md248"></a>
3.4 相机标定</h2>
<p>MvCamera 相机自动标定程序，在 <code>build</code> 文件夹下执行以下命令</p>
<div class="fragment"><div class="line">bin/rmvl_mv_auto_calib -w=&lt;?&gt; -h=&lt;?&gt; -s=&lt;?&gt; -d=&lt;?&gt; -n=&lt;?&gt;</div>
</div><!-- fragment --><p><code>&lt;?&gt;</code> 表示可调节，具体帮助可直接执行以下命令</p>
<div class="fragment"><div class="line">bin/rmvl_mv_calibration -help</div>
</div><!-- fragment --><p>另外还有相机手动标定程序，可执行以下命令</p>
<div class="fragment"><div class="line">bin/rmvl_mv_manual_calib</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md249"></a>
4. 使用 Demo</h1>
<dl class="section note"><dt>注解</dt><dd>下面以 MvCamera 为例， HikCamera 相机使用方式与之完全相同</dd></dl>
<p>连续采样：</p>
<div class="fragment"><div class="line"><span class="keywordtype">int</span> main()</div>
<div class="line">{</div>
<div class="line">    <a class="code hl_class" href="../../de/de8/classrm_1_1MvCamera.html">rm::MvCamera</a> capture(<a class="code hl_function" href="../../df/dfa/structrm_1_1CameraConfig.html#a1a285fd4742e8ced4907f83d520c943b">rm::CameraConfig::create</a>(<a class="code hl_enumvalue" href="../../dc/d90/group__camera.html#gga90ca2fddbb5f19ea4dc6f862157be49da535863a82f163709557e59e2eb8139a7">rm::GrabMode::Continuous</a>, <a class="code hl_enumvalue" href="../../dc/d90/group__camera.html#gga034d81b381d7c04ba4549cf3533750ffa5bd4c87976f48e6a53919d53e14025e9">rm::RetrieveMode::OpenCV</a>));</div>
<div class="line">    cv::Mat frame;</div>
<div class="line">    <span class="keywordflow">while</span>(capture.read(frame))</div>
<div class="line">    {</div>
<div class="line">        cv::imshow(<span class="stringliteral">&quot;frame&quot;</span>, frame);</div>
<div class="line">        <span class="keywordflow">if</span> (cv::waitKey(1) == 27)</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">    }</div>
<div class="line">}</div>
</div><!-- fragment --><p>软触发：</p>
<div class="fragment"><div class="line"><span class="keyword">using namespace </span>std::chrono_literals;</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">int</span> main()</div>
<div class="line">{</div>
<div class="line">    <span class="keyword">auto</span> camera_config = <a class="code hl_function" href="../../df/dfa/structrm_1_1CameraConfig.html#a1a285fd4742e8ced4907f83d520c943b">rm::CameraConfig::create</a>(<a class="code hl_enumvalue" href="../../dc/d90/group__camera.html#gga90ca2fddbb5f19ea4dc6f862157be49da719d067b229178f03bcfa1da4ac4dede">rm::GrabMode::Software</a>, <a class="code hl_enumvalue" href="../../dc/d90/group__camera.html#gga034d81b381d7c04ba4549cf3533750ffa5bd4c87976f48e6a53919d53e14025e9">rm::RetrieveMode::OpenCV</a>)</div>
<div class="line">    <a class="code hl_class" href="../../de/de8/classrm_1_1MvCamera.html">rm::MvCamera</a> capture(camera_config);</div>
<div class="line"> </div>
<div class="line">    <span class="keywordtype">bool</span> run = <span class="keyword">true</span>;</div>
<div class="line">    std::thread th([&amp;run]() {</div>
<div class="line">        <span class="keywordflow">while</span> (run)</div>
<div class="line">        {</div>
<div class="line">            std::this_thread::sleep_for(10ms);</div>
<div class="line">            capture.set(<a class="code hl_enumvalue" href="../../dc/d90/group__camera.html#gga3dabb1d304a05608ec415f8f6c289423a12208efc7911e8dfb4b9fb46aa6bb313">rm::CAMERA_TRIGGER_SOFT</a>); <span class="comment">// 触发</span></div>
<div class="line">        }</div>
<div class="line">    });</div>
<div class="line"> </div>
<div class="line">    cv::Mat frame;</div>
<div class="line">    <span class="keywordflow">while</span> (capture.read(frame))</div>
<div class="line">    {</div>
<div class="line">        cv::imshow(<span class="stringliteral">&quot;frame&quot;</span>, frame);</div>
<div class="line">        <span class="keywordflow">if</span> (cv::waitKey(1) == 27)</div>
<div class="line">        {</div>
<div class="line">            run = <span class="keyword">false</span>;</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line">    th.join();</div>
<div class="line">}</div>
<div class="ttc" id="agroup__camera_html_gga3dabb1d304a05608ec415f8f6c289423a12208efc7911e8dfb4b9fb46aa6bb313"><div class="ttname"><a href="../../dc/d90/group__camera.html#gga3dabb1d304a05608ec415f8f6c289423a12208efc7911e8dfb4b9fb46aa6bb313">rm::CAMERA_TRIGGER_SOFT</a></div><div class="ttdeci">@ CAMERA_TRIGGER_SOFT</div><div class="ttdoc">执行软触发</div><div class="ttdef"><b>定义</b> camutils.hpp:118</div></div>
</div><!-- fragment --> </div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- HTML footer for doxygen 1.8.6-->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
制作者 &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../../doxygen.png" alt="doxygen"/>
</a> 1.13.2
</small></address>
<script type="text/javascript">
//<![CDATA[
addTutorialsButtons();
//]]>
</script>
</body>
</html>
