<!-- HTML header for doxygen 1.8.6-->
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=9" />
  <meta name="generator" content="Doxygen 1.15.0" />
  <title>RMVL: 相机设备</title>
  <link href="../../rmvl-logo-small.png" rel="shortcut icon" type="image/x-icon" />
  <link href="../../tabs.css" rel="stylesheet" type="text/css" />
  <script type="text/javascript" src="../../jquery.js"></script>
  <script type="text/javascript" src="../../dynsections.js"></script>
  <script type="text/javascript" src="../../cookie.js"></script>
  <link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
  <script type="text/x-mathjax-config">
MathJax.Hub.Config({
  extensions: ["tex2jax.js"],
  jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js"></script>
  <link href="../../doxygen.css" rel="stylesheet" type="text/css" />
  <link href="../../doxygen-awesome.css" rel="stylesheet" type="text/css"/>
  <!-- ... other metadata & script includes ... -->
  <script type="text/javascript" src="../../doxygen-awesome-darkmode-toggle.js"></script>
  <script type="text/javascript">
    DoxygenAwesomeDarkModeToggle.init()
  </script>
  <script type="text/javascript" src="../../doxygen-awesome-fragment-copy-button.js"></script>
  <script type="text/javascript">
    DoxygenAwesomeFragmentCopyButton.init()
  </script>
  <script type="text/javascript" src="../../doxygen-awesome-interactive-toc.js"></script>
  <script type="text/javascript">
    DoxygenAwesomeInteractiveToc.init()
  </script>
  <script type="text/javascript" src="../../doxygen-awesome-paragraph-link.js"></script>
  <script type="text/javascript">
    DoxygenAwesomeParagraphLink.init()
  </script>
  <script type="text/javascript" src="../../doxygen-awesome-tabs.js"></script>
  <script type="text/javascript">
    DoxygenAwesomeTabs.init()
  </script>
</head>
<body>
  <div id="top"><!-- do not remove this div, it is closed by doxygen! -->
    <div id="titlearea">
      <!--#include virtual="/google-search.html"-->
      <script type="text/javascript" src="/docs/version.js"></script>
      <table cellspacing="0" cellpadding="0">
        <tbody>
          <tr style="height: 56px;">
            <td id="projectlogo"><img alt="Logo" src="../../rmvl-logo.png" /></td>
            <td style="padding-left: 0.5em;">
              <div id="projectname">RMVL
                &#160;<span id="projectnumber">2.4.0-dev</span>
              </div>
              <div id="projectbrief">Robotic Manipulation and Vision Library</div>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
    <!-- end header part -->
<!-- 制作者 Doxygen 1.15.0 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search/",'.html');
</script>
<script type="text/javascript">
$(function() { codefold.init(); });
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('../../',true,false,'search.php','搜索',false);
  $(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">载入中...</div>
<div class="SRStatus" id="Searching">搜索中...</div>
<div class="SRStatus" id="NoMatches">未找到</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a href="../../dd/da0/tutorials.html">RMVL 使用教程</a></li><li class="navelem"><a href="../../d6/d6e/tutorial_table_of_content_modules.html">主要模块使用教程</a></li>  </ul>
</div>
</div><!-- top -->
<div id="doc-content">
<div><div class="header">
  <div class="headertitle"><div class="title">相机设备 </div></div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>目录</h3>
<ul>
  <li class="level1">
    <a href="#autotoc_md249">1 如何使用 </a>
    <ul>
      <li class="level2">
        <a href="#autotoc_md250">1.1 初始化 </a>
      </li>
      <li class="level2">
        <a href="#autotoc_md251">1.2 光学属性设置 </a>
        <ul>
          <li class="level3">
            <a href="#autotoc_md252">1.2.1 曝光设置 </a>
          </li>
          <li class="level3">
            <a href="#autotoc_md253">1.2.2 白平衡设置 </a>
          </li>
          <li class="level3">
            <a href="#autotoc_md254">1.2.3 其余光学参数设置 </a>
          </li>
        </ul>
      </li>
      <li class="level2">
        <a href="#autotoc_md255">1.3 触发属性设置 </a>
      </li>
    </ul>
  </li>
  <li class="level1">
    <a href="#autotoc_md256">2 para 参数加载 </a>
  </li>
  <li class="level1">
    <a href="#autotoc_md257">3 示例程序 </a>
    <ul>
      <li class="level2">
        <a href="#autotoc_md258">3.1 单相机 </a>
      </li>
      <li class="level2">
        <a href="#autotoc_md259">3.2 多相机 </a>
      </li>
      <li class="level2">
        <a href="#autotoc_md260">3.3 相机录屏 </a>
      </li>
      <li class="level2">
        <a href="#autotoc_md261">3.4 相机标定 </a>
      </li>
    </ul>
  </li>
  <li class="level1">
    <a href="#autotoc_md262">4 使用 Demo </a>
    <ul>
      <li class="level2">
        <a href="#autotoc_md263">4.1 连续采样 </a>
      </li>
      <li class="level2">
        <a href="#autotoc_md264">4.2 软触发 </a>
      </li>
    </ul>
  </li>
</ul>
</div>
<div class="textblock"><p>相机模块的基本使用，包括初始化、参数设置以及运行示例</p>
<p><a class="anchor" id="md__2home_2zhaoxi_2_xE6_xA1_x8C_xE9_x9D_xA2_2Vision_2cv-rmvl_2rmvl_2doc_2tutorials_2modules_2tools_2camera"></a></p>
<dl class="section author"><dt>作者</dt><dd>赵曦 </dd></dl>
<dl class="section date"><dt>日期</dt><dd>2023/03/15 </dd></dl>
<dl class="section version"><dt>版本</dt><dd>1.0</dd></dl>
<p><b>上一篇教程：</b><a class="el" href="../../d3/d8e/tutorial_modules_lpss.html">轻量发布订阅服务 —— LPSS</a> <br  />
 <b>下一篇教程：</b><a class="el" href="../../dc/d10/tutorial_modules_light.html">光源控制器</a> <br  />
</p>
<hr  />
<p>相关类</p><ul>
<li>迈德威视 USB3.0 工业相机 <a class="el" href="../../de/de8/classrm_1_1MvCamera.html" title="迈德威视相机库">rm::MvCamera</a></li>
<li>海康机器人 USB3.0/GigE 工业相机 <a class="el" href="../../db/d9f/classrm_1_1HikCamera.html" title="海康机器人相机库">rm::HikCamera</a></li>
<li>奥普特机器视觉 USB3.0/GigE 工业相机 <a class="el" href="../../d1/d9c/classrm_1_1OptCamera.html" title="奥普特机器视觉相机库">rm::OptCamera</a></li>
<li>大恒图像 Galaxy USB3.0/GigE 工业相机 <a class="el" href="../../da/d1d/classrm_1_1GalaxyCamera.html" title="大恒图像 Galaxy 系列工业相机库">rm::GalaxyCamera</a></li>
</ul>
<h1 class="doxsection"><a class="anchor" id="autotoc_md249"></a>
1 如何使用</h1>
<p>使用前需安装相机驱动，详情参考：<a class="el" href="../../d1/db4/tutorial_install.html">构建并安装 RMVL</a> ，下面以 MvCamera 为例介绍如何使用相机模块，其余相机操作完全一致。</p>
<h2 class="doxsection"><a class="anchor" id="autotoc_md250"></a>
1.1 初始化</h2>
<p>创建 MvCamera 对象即可初始化相机：</p>
<div class="tabbed"></div><div class="tabbed"><ul>
<li><p class="startli"><b class="tab-title">C++</b></p>
<div class="fragment"><div class="line"><span class="keyword">auto</span> cam_cfg = <a class="code hl_function" href="../../df/dfa/structrm_1_1CameraConfig.html#a1a285fd4742e8ced4907f83d520c943b">rm::CameraConfig::create</a>(<a class="code hl_enumvalue" href="../../dc/d90/group__camera.html#gga90ca2fddbb5f19ea4dc6f862157be49da535863a82f163709557e59e2eb8139a7">rm::GrabMode::Continuous</a>, <a class="code hl_enumvalue" href="../../dc/d90/group__camera.html#gga034d81b381d7c04ba4549cf3533750ffaf20e3c5e54c0ab3d375d660b3f896f6a">rm::RetrieveMode::SDK</a>);</div>
<div class="line"><a class="code hl_class" href="../../de/de8/classrm_1_1MvCamera.html">rm::MvCamera</a> capture(cam_cfg, <span class="stringliteral">&quot;0123456789&quot;</span>);</div>
<div class="ttc" id="aclassrm_1_1MvCamera_html"><div class="ttname"><a href="../../de/de8/classrm_1_1MvCamera.html">rm::MvCamera</a></div><div class="ttdoc">迈德威视相机库</div><div class="ttdef"><b>定义</b> mv_camera.h:37</div></div>
<div class="ttc" id="agroup__camera_html_gga034d81b381d7c04ba4549cf3533750ffaf20e3c5e54c0ab3d375d660b3f896f6a"><div class="ttname"><a href="../../dc/d90/group__camera.html#gga034d81b381d7c04ba4549cf3533750ffaf20e3c5e54c0ab3d375d660b3f896f6a">rm::RetrieveMode::SDK</a></div><div class="ttdeci">@ SDK</div><div class="ttdoc">使用官方 SDK 进行处理</div><div class="ttdef"><b>定义</b> camutils.hpp:50</div></div>
<div class="ttc" id="agroup__camera_html_gga90ca2fddbb5f19ea4dc6f862157be49da535863a82f163709557e59e2eb8139a7"><div class="ttname"><a href="../../dc/d90/group__camera.html#gga90ca2fddbb5f19ea4dc6f862157be49da535863a82f163709557e59e2eb8139a7">rm::GrabMode::Continuous</a></div><div class="ttdeci">@ Continuous</div><div class="ttdoc">连续采样</div><div class="ttdef"><b>定义</b> camutils.hpp:33</div></div>
<div class="ttc" id="astructrm_1_1CameraConfig_html_a1a285fd4742e8ced4907f83d520c943b"><div class="ttname"><a href="../../df/dfa/structrm_1_1CameraConfig.html#a1a285fd4742e8ced4907f83d520c943b">rm::CameraConfig::create</a></div><div class="ttdeci">static CameraConfig create(Args &amp;&amp;...modes)</div><div class="ttdoc">创建相机初始化配置模式</div><div class="ttdef"><b>定义</b> camutils.hpp:66</div></div>
</div><!-- fragment --></li>
<li><p class="startli"><b class="tab-title">Python</b></p>
<div class="fragment"><div class="line">cam_cfg = <a class="code hl_struct" href="../../df/dfa/structrm_1_1CameraConfig.html">rm.CameraConfig</a>()</div>
<div class="line">cam_cfg.grab_mode = rm.GrabMode.Continuous</div>
<div class="line">cam_cfg.retrieve_mode = rm.RetrieveMode.SDK</div>
<div class="line"> </div>
<div class="line">capture = <a class="code hl_class" href="../../de/de8/classrm_1_1MvCamera.html">rm.MvCamera</a>(cam_cfg, <span class="stringliteral">&quot;0123456789&quot;</span>)</div>
<div class="ttc" id="astructrm_1_1CameraConfig_html"><div class="ttname"><a href="../../df/dfa/structrm_1_1CameraConfig.html">rm::CameraConfig</a></div><div class="ttdoc">相机初始化配置模式</div><div class="ttdef"><b>定义</b> camutils.hpp:54</div></div>
</div><!-- fragment --></li>
</ul>
</div><div class="tabbed"></div><p>第 1 个参数为 <b>相机初始化模式</b> ，包含</p>
<ul>
<li>相机外部触发通道</li>
<li>相机采集模式</li>
<li>相机句柄创建方式</li>
<li>相机数据处理模式</li>
</ul>
<p>4 个待配置的数据，见下表</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadCenter" width="140">初始化配置模式</th><th class="markdownTableHeadCenter" width="120">含义</th><th class="markdownTableHeadCenter" width="190">标识符</th><th class="markdownTableHeadCenter">功能</th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyCenter" rowspan="4">相机外部触发通道</td><td class="markdownTableBodyCenter">通道 0</td><td class="markdownTableBodyCenter"><code><a class="el" href="../../dc/d90/group__camera.html#ggafd1e51b9b1633d344461f1cb73a26b7aa4c8f067bdd364e561fd1a5b766fb30da" title="通道 0">rm::TriggerChannel::Chn0</a></code></td><td class="markdownTableBodyCenter">通道 0 生效</td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyCenter">通道 1</td><td class="markdownTableBodyCenter"><code><a class="el" href="../../dc/d90/group__camera.html#ggafd1e51b9b1633d344461f1cb73a26b7aa965c0cc3993772fa0890e4f26c953467" title="通道 1">rm::TriggerChannel::Chn1</a></code></td><td class="markdownTableBodyCenter">通道 1 生效</td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyCenter">通道 2</td><td class="markdownTableBodyCenter"><code><a class="el" href="../../dc/d90/group__camera.html#ggafd1e51b9b1633d344461f1cb73a26b7aac1d24a7c11cfbd7898dd36f172f996b6" title="通道 2">rm::TriggerChannel::Chn2</a></code></td><td class="markdownTableBodyCenter">通道 2 生效</td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyCenter">通道 3</td><td class="markdownTableBodyCenter"><code><a class="el" href="../../dc/d90/group__camera.html#ggafd1e51b9b1633d344461f1cb73a26b7aabbb9ea5d9d7ad6cf024bb0a8c9210aa6" title="通道 3">rm::TriggerChannel::Chn3</a></code></td><td class="markdownTableBodyCenter">通道 3 生效</td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyCenter" rowspan="3">采集方式</td><td class="markdownTableBodyCenter">连续采集</td><td class="markdownTableBodyCenter"><code><a class="el" href="../../dc/d90/group__camera.html#gga90ca2fddbb5f19ea4dc6f862157be49da535863a82f163709557e59e2eb8139a7" title="连续采样">rm::GrabMode::Continuous</a></code></td><td class="markdownTableBodyCenter">连续触发相机，当 <code>grab</code> 方法被执行后，相机将开始连续采集，一般调用 <code>read</code> 或在相机构造之初可自动开启相机 Grabbing。</td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyCenter">软触发</td><td class="markdownTableBodyCenter"><code><a class="el" href="../../dc/d90/group__camera.html#gga90ca2fddbb5f19ea4dc6f862157be49da719d067b229178f03bcfa1da4ac4dede" title="软触发">rm::GrabMode::Software</a></code></td><td class="markdownTableBodyCenter">软件触发，需要手动设置触发帧，当相机开始取流（Grabbing）时，只有在被设置触发帧之后的下一次执行有效，否则会阻塞以等待接收到触发帧，RMVL 相机库目前仅支持同步的相机数据处理，在指定时间内如果没有收到触发帧，则会被认为相机读取 <code>read</code> 失败。</td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyCenter">硬触发</td><td class="markdownTableBodyCenter"><code><a class="el" href="../../dc/d90/group__camera.html#gga90ca2fddbb5f19ea4dc6f862157be49da3c02a379965ab0dfcd77b1c484450433" title="硬触发">rm::GrabMode::Hardware</a></code></td><td class="markdownTableBodyCenter">硬件触发，通过向相机的航空接头等串行通信接口传输高低电平信号来设置触发帧，信号的有效性可通过软件设置，例如设置高电平、低电平、上升边沿、下降边沿的一种为触发方式，有关相机取流的细节同软触发。</td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyCenter" rowspan="4">相机句柄模式</td><td class="markdownTableBodyCenter">索引号</td><td class="markdownTableBodyCenter"><code><a class="el" href="../../dc/d90/group__camera.html#gga0a7fc1f9340aca49db5826b726c100a3a88fa71f0a6e0dfedbb46d91cc0b37a50" title="相机的索引号 (0, 1, 2 ...)">rm::HandleMode::Index</a></code></td><td class="markdownTableBodyCenter">相机的索引号 <span class="tt">(0, 1, 2 ...)</span></td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyCenter">序列号</td><td class="markdownTableBodyCenter"><code><a class="el" href="../../dc/d90/group__camera.html#gga0a7fc1f9340aca49db5826b726c100a3a897356954c2cd3d41b221e3f24f99bba" title="制造商：序列号 S/N">rm::HandleMode::Key</a></code></td><td class="markdownTableBodyCenter">制造商：序列号 S/N</td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyCenter">MAC</td><td class="markdownTableBodyCenter"><code><a class="el" href="../../dc/d90/group__camera.html#gga0a7fc1f9340aca49db5826b726c100a3a2e25c285356cbb0ed8785a1377027d79" title="相机的 MAC 地址">rm::HandleMode::MAC</a></code></td><td class="markdownTableBodyCenter">相机的 MAC 地址</td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyCenter">IP 地址</td><td class="markdownTableBodyCenter"><code><a class="el" href="../../dc/d90/group__camera.html#gga0a7fc1f9340aca49db5826b726c100a3aa12a3079e14ced46e69ba52b8a90b21a" title="IP 地址">rm::HandleMode::IP</a></code></td><td class="markdownTableBodyCenter">IP 地址，形如 <code>192.168.1.100</code></td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyCenter" rowspan="2">相机数据处理模式</td><td class="markdownTableBodyCenter">使用 OpenCV</td><td class="markdownTableBodyCenter"><code><a class="el" href="../../dc/d90/group__camera.html#gga034d81b381d7c04ba4549cf3533750ffa5bd4c87976f48e6a53919d53e14025e9" title="使用 OpenCV 的 &#39;cvtColor&#39; 进行处理">rm::RetrieveMode::OpenCV</a></code></td><td class="markdownTableBodyCenter">OpenCV 的 <code>imgproc</code> 模块提供了有关数据处理的接口，例如 <code>cv::cvtColor</code> 可以用于色彩空间转换</td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyCenter">使用厂商 SDK</td><td class="markdownTableBodyCenter"><code><a class="el" href="../../dc/d90/group__camera.html#gga034d81b381d7c04ba4549cf3533750ffaf20e3c5e54c0ab3d375d660b3f896f6a" title="使用官方 SDK 进行处理">rm::RetrieveMode::SDK</a></code></td><td class="markdownTableBodyCenter">SDK 中提供了有关数据处理的接口，主要用于相机解码、色彩空间转换等操作</td></tr>
</table>
<p>详细的触发方式 </p><dl class="section see"><dt>参见</dt><dd></dd></dl>
<ul>
<li><a href="https://vision.scutbot.cn/hik/index.html" target="_blank">HIKROBOT 工业相机用户手册</a></li>
<li><a href="https://vision.scutbot.cn/mv/mv.pdf" target="_blank">迈德威视工业相机用户手册</a></li>
</ul>
<h2 class="doxsection"><a class="anchor" id="autotoc_md251"></a>
1.2 光学属性设置</h2>
<h3 class="doxsection"><a class="anchor" id="autotoc_md252"></a>
1.2.1 曝光设置</h3>
<p>手动/自动设置曝光</p>
<div class="tabbed"></div><div class="tabbed"><ul>
<li><p class="startli"><b class="tab-title">C++</b></p>
<div class="fragment"><div class="line">capture.set(<a class="code hl_enumvalue" href="../../dc/d90/group__camera.html#gga99adb67cebfd7d04dd4ca9bdd4960377a67f5b3633184924d27aa9d5486d4f395">rm::CameraProperties::auto_exposure</a>, <span class="keyword">false</span>); <span class="comment">// 手动曝光</span></div>
<div class="line">capture.set(<a class="code hl_enumvalue" href="../../dc/d90/group__camera.html#gga99adb67cebfd7d04dd4ca9bdd4960377a67f5b3633184924d27aa9d5486d4f395">rm::CameraProperties::auto_exposure</a>, <span class="keyword">true</span>);  <span class="comment">// 自动曝光</span></div>
<div class="ttc" id="agroup__camera_html_gga99adb67cebfd7d04dd4ca9bdd4960377a67f5b3633184924d27aa9d5486d4f395"><div class="ttname"><a href="../../dc/d90/group__camera.html#gga99adb67cebfd7d04dd4ca9bdd4960377a67f5b3633184924d27aa9d5486d4f395">rm::CameraProperties::auto_exposure</a></div><div class="ttdeci">@ auto_exposure</div><div class="ttdoc">自动曝光</div><div class="ttdef"><b>定义</b> camutils.hpp:90</div></div>
</div><!-- fragment --></li>
<li><p class="startli"><b class="tab-title">Python</b></p>
<div class="fragment"><div class="line">capture.set(rm.CameraProperties::auto_exposure, <span class="keyword">False</span>) <span class="comment"># 手动曝光</span></div>
<div class="line">capture.set(rm.CameraProperties::auto_exposure, <span class="keyword">True</span>)  <span class="comment"># 自动曝光</span></div>
</div><!-- fragment --></li>
</ul>
</div><div class="tabbed"></div><p>设置曝光值</p>
<div class="tabbed"></div><div class="tabbed"><ul>
<li><p class="startli"><b class="tab-title">C++</b></p>
<div class="fragment"><div class="line">capture.set(<a class="code hl_enumvalue" href="../../dc/d90/group__camera.html#gga99adb67cebfd7d04dd4ca9bdd4960377ab1b57b87d3b0adf8903512fb2e794408">rm::CameraProperties::exposure</a>, 600); <span class="comment">// 设置曝光值为 600</span></div>
<div class="ttc" id="agroup__camera_html_gga99adb67cebfd7d04dd4ca9bdd4960377ab1b57b87d3b0adf8903512fb2e794408"><div class="ttname"><a href="../../dc/d90/group__camera.html#gga99adb67cebfd7d04dd4ca9bdd4960377ab1b57b87d3b0adf8903512fb2e794408">rm::CameraProperties::exposure</a></div><div class="ttdeci">@ exposure</div><div class="ttdoc">曝光值</div><div class="ttdef"><b>定义</b> camutils.hpp:92</div></div>
</div><!-- fragment --></li>
<li><p class="startli"><b class="tab-title">Python</b></p>
<div class="fragment"><div class="line">capture.set(rm.CameraProperties::exposure, 600) <span class="comment"># 设置曝光值为 600</span></div>
</div><!-- fragment --></li>
</ul>
</div><div class="tabbed"></div><h3 class="doxsection"><a class="anchor" id="autotoc_md253"></a>
1.2.2 白平衡设置</h3>
<p>手动/自动设置白平衡</p>
<div class="tabbed"></div><div class="tabbed"><ul>
<li><p class="startli"><b class="tab-title">C++</b></p>
<div class="fragment"><div class="line">capture.set(<a class="code hl_enumvalue" href="../../dc/d90/group__camera.html#gga99adb67cebfd7d04dd4ca9bdd4960377a39df955b7d4e057ec0c9d3a0bd00fc31">rm::CameraProperties::auto_wb</a>, <span class="keyword">false</span>); <span class="comment">// 手动白平衡</span></div>
<div class="line">capture.set(<a class="code hl_enumvalue" href="../../dc/d90/group__camera.html#gga99adb67cebfd7d04dd4ca9bdd4960377a39df955b7d4e057ec0c9d3a0bd00fc31">rm::CameraProperties::auto_wb</a>, <span class="keyword">true</span>);  <span class="comment">// 自动白平衡</span></div>
<div class="ttc" id="agroup__camera_html_gga99adb67cebfd7d04dd4ca9bdd4960377a39df955b7d4e057ec0c9d3a0bd00fc31"><div class="ttname"><a href="../../dc/d90/group__camera.html#gga99adb67cebfd7d04dd4ca9bdd4960377a39df955b7d4e057ec0c9d3a0bd00fc31">rm::CameraProperties::auto_wb</a></div><div class="ttdeci">@ auto_wb</div><div class="ttdoc">自动白平衡</div><div class="ttdef"><b>定义</b> camutils.hpp:91</div></div>
</div><!-- fragment --></li>
<li><p class="startli"><b class="tab-title">Python</b></p>
<div class="fragment"><div class="line">capture.set(rm.CameraProperties::auto_wb, <span class="keyword">False</span>) <span class="comment"># 手动白平衡</span></div>
<div class="line">capture.set(rm.CameraProperties::auto_wb, <span class="keyword">True</span>)  <span class="comment"># 自动白平衡</span></div>
</div><!-- fragment --></li>
</ul>
</div><div class="tabbed"></div><p>设置各通道增益，并生效（在手动设置白平衡模式下有效）</p>
<div class="tabbed"></div><div class="tabbed"><ul>
<li><p class="startli"><b class="tab-title">C++</b></p>
<div class="fragment"><div class="line">capture.set(<a class="code hl_enumvalue" href="../../dc/d90/group__camera.html#gga99adb67cebfd7d04dd4ca9bdd4960377ab26aed45ced3bfb3f58f99b472806291">rm::CameraProperties::wb_rgain</a>, 102); <span class="comment">// 红色通道增益设置为 102</span></div>
<div class="line">capture.set(<a class="code hl_enumvalue" href="../../dc/d90/group__camera.html#gga99adb67cebfd7d04dd4ca9bdd4960377aa90f87f76bfd19b801bb63d61f418e80">rm::CameraProperties::wb_ggain</a>, 101); <span class="comment">// 绿色通道增益设置为 101</span></div>
<div class="line">capture.set(<a class="code hl_enumvalue" href="../../dc/d90/group__camera.html#gga99adb67cebfd7d04dd4ca9bdd4960377a3285e8a2520fa343627af20c53048134">rm::CameraProperties::wb_bgain</a>, 100); <span class="comment">// 蓝色通道增益设置为 100</span></div>
<div class="ttc" id="agroup__camera_html_gga99adb67cebfd7d04dd4ca9bdd4960377a3285e8a2520fa343627af20c53048134"><div class="ttname"><a href="../../dc/d90/group__camera.html#gga99adb67cebfd7d04dd4ca9bdd4960377a3285e8a2520fa343627af20c53048134">rm::CameraProperties::wb_bgain</a></div><div class="ttdeci">@ wb_bgain</div><div class="ttdoc">白平衡蓝色分量</div><div class="ttdef"><b>定义</b> camutils.hpp:97</div></div>
<div class="ttc" id="agroup__camera_html_gga99adb67cebfd7d04dd4ca9bdd4960377aa90f87f76bfd19b801bb63d61f418e80"><div class="ttname"><a href="../../dc/d90/group__camera.html#gga99adb67cebfd7d04dd4ca9bdd4960377aa90f87f76bfd19b801bb63d61f418e80">rm::CameraProperties::wb_ggain</a></div><div class="ttdeci">@ wb_ggain</div><div class="ttdoc">白平衡绿色分量</div><div class="ttdef"><b>定义</b> camutils.hpp:96</div></div>
<div class="ttc" id="agroup__camera_html_gga99adb67cebfd7d04dd4ca9bdd4960377ab26aed45ced3bfb3f58f99b472806291"><div class="ttname"><a href="../../dc/d90/group__camera.html#gga99adb67cebfd7d04dd4ca9bdd4960377ab26aed45ced3bfb3f58f99b472806291">rm::CameraProperties::wb_rgain</a></div><div class="ttdeci">@ wb_rgain</div><div class="ttdoc">白平衡红色分量</div><div class="ttdef"><b>定义</b> camutils.hpp:95</div></div>
</div><!-- fragment --></li>
<li><p class="startli"><b class="tab-title">Python</b></p>
<div class="fragment"><div class="line">capture.set(rm.CameraProperties::wb_rgain, 102) <span class="comment"># 红色通道增益设置为 102</span></div>
<div class="line">capture.set(rm.CameraProperties::wb_ggain, 101) <span class="comment"># 绿色通道增益设置为 101</span></div>
<div class="line">capture.set(rm.CameraProperties::wb_bgain, 100) <span class="comment"># 蓝色通道增益设置为 100</span></div>
</div><!-- fragment --></li>
</ul>
</div><div class="tabbed"></div><h3 class="doxsection"><a class="anchor" id="autotoc_md254"></a>
1.2.3 其余光学参数设置</h3>
<div class="tabbed"></div><div class="tabbed"><ul>
<li><p class="startli"><b class="tab-title">C++</b></p>
<div class="fragment"><div class="line">capture.set(<a class="code hl_enumvalue" href="../../dc/d90/group__camera.html#gga99adb67cebfd7d04dd4ca9bdd4960377ad2d74b47b149d8090871a2f33e80809b">rm::CameraProperties::gain</a>, 64);        <span class="comment">// 设置模拟增益为 64</span></div>
<div class="line">capture.set(<a class="code hl_enumvalue" href="../../dc/d90/group__camera.html#gga99adb67cebfd7d04dd4ca9bdd4960377a05b048d7242cb7b8b57cfa3b1d65ecea">rm::CameraProperties::gamma</a>, 80);       <span class="comment">// 设置 Gamma 为 80</span></div>
<div class="line">capture.set(<a class="code hl_enumvalue" href="../../dc/d90/group__camera.html#gga99adb67cebfd7d04dd4ca9bdd4960377ac8fd07f040a8f2dc85f5b2d3804ea3db">rm::CameraProperties::contrast</a>, 120);   <span class="comment">// 设置对比度为 120</span></div>
<div class="line">capture.set(<a class="code hl_enumvalue" href="../../dc/d90/group__camera.html#gga99adb67cebfd7d04dd4ca9bdd4960377afd71ed58ae07cc75900a5169e6f9c287">rm::CameraProperties::saturation</a>, 100); <span class="comment">// 设置饱和度为 100</span></div>
<div class="line">capture.set(<a class="code hl_enumvalue" href="../../dc/d90/group__camera.html#gga99adb67cebfd7d04dd4ca9bdd4960377a3b2d7435a9d67b3630988c398af85da5">rm::CameraProperties::sharpness</a>, 100);  <span class="comment">// 设置锐度为 100</span></div>
<div class="ttc" id="agroup__camera_html_gga99adb67cebfd7d04dd4ca9bdd4960377a05b048d7242cb7b8b57cfa3b1d65ecea"><div class="ttname"><a href="../../dc/d90/group__camera.html#gga99adb67cebfd7d04dd4ca9bdd4960377a05b048d7242cb7b8b57cfa3b1d65ecea">rm::CameraProperties::gamma</a></div><div class="ttdeci">@ gamma</div><div class="ttdoc">Gamma 值</div><div class="ttdef"><b>定义</b> camutils.hpp:94</div></div>
<div class="ttc" id="agroup__camera_html_gga99adb67cebfd7d04dd4ca9bdd4960377a3b2d7435a9d67b3630988c398af85da5"><div class="ttname"><a href="../../dc/d90/group__camera.html#gga99adb67cebfd7d04dd4ca9bdd4960377a3b2d7435a9d67b3630988c398af85da5">rm::CameraProperties::sharpness</a></div><div class="ttdeci">@ sharpness</div><div class="ttdoc">锐度</div><div class="ttdef"><b>定义</b> camutils.hpp:100</div></div>
<div class="ttc" id="agroup__camera_html_gga99adb67cebfd7d04dd4ca9bdd4960377ac8fd07f040a8f2dc85f5b2d3804ea3db"><div class="ttname"><a href="../../dc/d90/group__camera.html#gga99adb67cebfd7d04dd4ca9bdd4960377ac8fd07f040a8f2dc85f5b2d3804ea3db">rm::CameraProperties::contrast</a></div><div class="ttdeci">@ contrast</div><div class="ttdoc">对比度</div><div class="ttdef"><b>定义</b> camutils.hpp:98</div></div>
<div class="ttc" id="agroup__camera_html_gga99adb67cebfd7d04dd4ca9bdd4960377ad2d74b47b149d8090871a2f33e80809b"><div class="ttname"><a href="../../dc/d90/group__camera.html#gga99adb67cebfd7d04dd4ca9bdd4960377ad2d74b47b149d8090871a2f33e80809b">rm::CameraProperties::gain</a></div><div class="ttdeci">@ gain</div><div class="ttdoc">模拟增益</div><div class="ttdef"><b>定义</b> camutils.hpp:93</div></div>
<div class="ttc" id="agroup__camera_html_gga99adb67cebfd7d04dd4ca9bdd4960377afd71ed58ae07cc75900a5169e6f9c287"><div class="ttname"><a href="../../dc/d90/group__camera.html#gga99adb67cebfd7d04dd4ca9bdd4960377afd71ed58ae07cc75900a5169e6f9c287">rm::CameraProperties::saturation</a></div><div class="ttdeci">@ saturation</div><div class="ttdoc">饱和度</div><div class="ttdef"><b>定义</b> camutils.hpp:99</div></div>
</div><!-- fragment --></li>
<li><p class="startli"><b class="tab-title">Python</b></p>
<div class="fragment"><div class="line">capture.set(rm.CameraProperties::gain, 64)        <span class="comment"># 设置模拟增益为 64</span></div>
<div class="line">capture.set(rm.CameraProperties::gamma, 80)       <span class="comment"># 设置 Gamma 为 80</span></div>
<div class="line">capture.set(rm.CameraProperties::contrast, 120)   <span class="comment"># 设置对比度为 120</span></div>
<div class="line">capture.set(rm.CameraProperties::saturation, 100) <span class="comment"># 设置饱和度为 100</span></div>
<div class="line">capture.set(rm.CameraProperties::sharpness, 100)  <span class="comment"># 设置锐度为 100</span></div>
</div><!-- fragment --></li>
</ul>
</div><div class="tabbed"></div><dl class="section note"><dt>注解</dt><dd>Hik 工业相机暂不支持修改 Gamma</dd></dl>
<h2 class="doxsection"><a class="anchor" id="autotoc_md255"></a>
1.3 触发属性设置</h2>
<div class="tabbed"></div><div class="tabbed"><ul>
<li><p class="startli"><b class="tab-title">C++</b></p>
<div class="fragment"><div class="line"><span class="comment">// 设置硬触发采集延迟为 1000 μs，仅在硬触发模式下有效</span></div>
<div class="line">capture.set(<a class="code hl_enumvalue" href="../../dc/d90/group__camera.html#gga99adb67cebfd7d04dd4ca9bdd4960377a5b3e7931ea6c6bfa6417c297371d11a2">rm::CameraProperties::trigger_delay</a>, 1000);</div>
<div class="line"><span class="comment">// 设置单次触发时的触发帧数为 5 帧，即一次触发能触发 5 帧画面，仅在触发模式下有效</span></div>
<div class="line">capture.set(<a class="code hl_enumvalue" href="../../dc/d90/group__camera.html#gga99adb67cebfd7d04dd4ca9bdd4960377ac3649ee31c430fabfe598c368f69528b">rm::CameraProperties::trigger_count</a>, 5);</div>
<div class="line"><span class="comment">// 设置单次触发时多次采集的周期为 100 μs，即一次触发信号能触发多帧画面，每帧间隔为 100 μs</span></div>
<div class="line">capture.set(<a class="code hl_enumvalue" href="../../dc/d90/group__camera.html#gga99adb67cebfd7d04dd4ca9bdd4960377ad5ad623589f7afc4c09758f818228b8b">rm::CameraProperties::trigger_period</a>, 100);</div>
<div class="line"><span class="comment">// 执行一次白平衡操作，仅在手动白平衡模式下有效</span></div>
<div class="line">capture.trigger(<a class="code hl_enumvalue" href="../../dc/d90/group__camera.html#gga7187e1219e13ae6a717cce746e4c9136aa68813af43795ef9975e4da5ac6bf643">rm::CameraEvents::once_wb</a>);</div>
<div class="line"><span class="comment">// 执行一次软触发，仅在软触发模式下有效</span></div>
<div class="line">capture.trigger(<a class="code hl_enumvalue" href="../../dc/d90/group__camera.html#gga7187e1219e13ae6a717cce746e4c9136acd3419bad74278b9b6096836fbc6bec2">rm::CameraEvents::software</a>);</div>
<div class="ttc" id="agroup__camera_html_gga7187e1219e13ae6a717cce746e4c9136aa68813af43795ef9975e4da5ac6bf643"><div class="ttname"><a href="../../dc/d90/group__camera.html#gga7187e1219e13ae6a717cce746e4c9136aa68813af43795ef9975e4da5ac6bf643">rm::once_wb</a></div><div class="ttdeci">@ once_wb</div><div class="ttdoc">执行单次白平衡</div><div class="ttdef"><b>定义</b> camutils.hpp:111</div></div>
<div class="ttc" id="agroup__camera_html_gga7187e1219e13ae6a717cce746e4c9136acd3419bad74278b9b6096836fbc6bec2"><div class="ttname"><a href="../../dc/d90/group__camera.html#gga7187e1219e13ae6a717cce746e4c9136acd3419bad74278b9b6096836fbc6bec2">rm::software</a></div><div class="ttdeci">@ software</div><div class="ttdoc">执行软触发</div><div class="ttdef"><b>定义</b> camutils.hpp:112</div></div>
<div class="ttc" id="agroup__camera_html_gga99adb67cebfd7d04dd4ca9bdd4960377a5b3e7931ea6c6bfa6417c297371d11a2"><div class="ttname"><a href="../../dc/d90/group__camera.html#gga99adb67cebfd7d04dd4ca9bdd4960377a5b3e7931ea6c6bfa6417c297371d11a2">rm::CameraProperties::trigger_delay</a></div><div class="ttdeci">@ trigger_delay</div><div class="ttdoc">硬触发采集延迟（微秒 ）</div><div class="ttdef"><b>定义</b> camutils.hpp:103</div></div>
<div class="ttc" id="agroup__camera_html_gga99adb67cebfd7d04dd4ca9bdd4960377ac3649ee31c430fabfe598c368f69528b"><div class="ttname"><a href="../../dc/d90/group__camera.html#gga99adb67cebfd7d04dd4ca9bdd4960377ac3649ee31c430fabfe598c368f69528b">rm::CameraProperties::trigger_count</a></div><div class="ttdeci">@ trigger_count</div><div class="ttdoc">单次触发时的触发帧数</div><div class="ttdef"><b>定义</b> camutils.hpp:104</div></div>
<div class="ttc" id="agroup__camera_html_gga99adb67cebfd7d04dd4ca9bdd4960377ad5ad623589f7afc4c09758f818228b8b"><div class="ttname"><a href="../../dc/d90/group__camera.html#gga99adb67cebfd7d04dd4ca9bdd4960377ad5ad623589f7afc4c09758f818228b8b">rm::CameraProperties::trigger_period</a></div><div class="ttdeci">@ trigger_period</div><div class="ttdoc">单次触发时多次采集的周期（微秒 ）</div><div class="ttdef"><b>定义</b> camutils.hpp:105</div></div>
</div><!-- fragment --></li>
<li><p class="startli"><b class="tab-title">Python</b></p>
<div class="fragment"><div class="line"><span class="comment"># 设置硬触发采集延迟为 1000 μs，仅在硬触发模式下有效</span></div>
<div class="line">capture.set(rm.CameraProperties::trigger_delay, 1000)</div>
<div class="line"><span class="comment"># 设置单次触发时的触发帧数为 5 帧，即一次触发能触发 5 帧画面，仅在触发模式下有效</span></div>
<div class="line">capture.set(rm.CameraProperties::trigger_count, 5)</div>
<div class="line"><span class="comment"># 设置单次触发时多次采集的周期为 100 μs，即一次触发信号能触发多帧画面，每帧间隔为 100 μs</span></div>
<div class="line">capture.set(rm.CameraProperties::trigger_period, 100)</div>
<div class="line"><span class="comment"># 执行一次白平衡操作，仅在手动白平衡模式下有效</span></div>
<div class="line">capture.trigger(rm.CameraEvents::once_wb)</div>
<div class="line"><span class="comment"># 执行一次软触发，仅在软触发模式下有效</span></div>
<div class="line">capture.trigger(rm.CameraEvents::software)</div>
</div><!-- fragment --></li>
</ul>
</div><div class="tabbed"></div><h1 class="doxsection"><a class="anchor" id="autotoc_md256"></a>
2 para 参数加载</h1>
<p>RMVL 提供了全局的相机参数对象： <a class="el" href="../../d2/df4/group__para__camera.html#ga920ea1f18537e54423f9f6c0ff586b55" title="CameraParam 参数模块">rm::para::camera_param</a> ，详情可参考类 <a class="el" href="../../d4/dc5/classrm_1_1para_1_1CameraParam.html" title="CameraParam 参数模块">rm::para::CameraParam</a></p>
<h1 class="doxsection"><a class="anchor" id="autotoc_md257"></a>
3 示例程序</h1>
<p>在构建 RMVL 时，需开启 <span class="tt">BUILD_EXAMPLES</span> 选项（默认开启）</p>
<div class="fragment"><div class="line">cmake -DBUILD_EXAMPLES=ON ..</div>
<div class="line">cmake --build . --parallel 4</div>
<div class="line">cd build</div>
</div><!-- fragment --><h2 class="doxsection"><a class="anchor" id="autotoc_md258"></a>
3.1 单相机</h2>
<p>单相机例程，在 build 文件夹下执行以下命令</p>
<div class="fragment"><div class="line">bin/rmvl_mv_mono</div>
</div><!-- fragment --><p>相机按照连续采样、<span class="tt">cvtColor</span> 处理方式运行，程序运行中，<span class="tt">cv::waitKey(1)</span> 接受到 <span class="tt">s</span> 键被按下时，可将参数保存到 <span class="tt">out_para.yml</span> 文件中。</p>
<p>键入一次 <span class="tt">Esc</span> 可暂停程序，按其余键可恢复。键入两次 <span class="tt">Esc</span> 可退出程序。</p>
<h2 class="doxsection"><a class="anchor" id="autotoc_md259"></a>
3.2 多相机</h2>
<p>多相机例程，在 <span class="tt">build</span> 文件夹下执行以下命令</p>
<div class="fragment"><div class="line">bin/rmvl_mv_multi</div>
</div><!-- fragment --><p>相机按照连续采样、<span class="tt">cvtColor</span> 处理方式运行，程序会枚举所有的相机设备，并可视化的显示出来，指定一个序列号来启动某一相机。</p>
<p>程序运行过程中，相机参数会自动从 <span class="tt">out_para.yml</span> 中加载，若没有则会按照默认值运行。</p>
<p>键入一次 <span class="tt">Esc</span> 可暂停程序，按其余键可恢复。键入两次 <span class="tt">Esc</span> 可退出程序。</p>
<h2 class="doxsection"><a class="anchor" id="autotoc_md260"></a>
3.3 相机录屏</h2>
<p>相机录屏例程，在 build 文件夹下执行以下命令</p>
<div class="fragment"><div class="line">bin/rmvl_mv_writer</div>
</div><!-- fragment --><p>相机按照连续采样、<span class="tt">cvtColor</span> 处理方式运行，<span class="tt">-o</span> 可指定输出文件名，否则默认输出到 <span class="tt">ts.avi</span>，例如</p>
<div class="fragment"><div class="line">bin/rmvl_mv_writer -o=aaa.avi</div>
</div><!-- fragment --><p>程序运行过程中，相机参数会自动从 <span class="tt">out_para.yml</span> 中加载，若没有则会按照默认值运行。</p>
<h2 class="doxsection"><a class="anchor" id="autotoc_md261"></a>
3.4 相机标定</h2>
<p>MvCamera 相机自动标定程序，在 <span class="tt">build</span> 文件夹下执行以下命令</p>
<div class="fragment"><div class="line">bin/rmvl_mv_auto_calib -w=&lt;?&gt; -h=&lt;?&gt; -s=&lt;?&gt; -d=&lt;?&gt; -n=&lt;?&gt;</div>
</div><!-- fragment --><p><span class="tt">&lt;?&gt;</span> 表示可调节，具体帮助可直接执行以下命令</p>
<div class="fragment"><div class="line">bin/rmvl_mv_calibration -help</div>
</div><!-- fragment --><p>另外还有相机手动标定程序，可执行以下命令</p>
<div class="fragment"><div class="line">bin/rmvl_mv_manual_calib</div>
</div><!-- fragment --><h1 class="doxsection"><a class="anchor" id="autotoc_md262"></a>
4 使用 Demo</h1>
<h2 class="doxsection"><a class="anchor" id="autotoc_md263"></a>
4.1 连续采样</h2>
<div class="tabbed"></div><div class="tabbed"><ul>
<li><p class="startli"><b class="tab-title">C++</b></p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &lt;opencv2/highgui.hpp&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#include &lt;rmvl/camera/mv_camera.h&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">int</span> main() {</div>
<div class="line">    <a class="code hl_class" href="../../de/de8/classrm_1_1MvCamera.html">rm::MvCamera</a> capture(<a class="code hl_function" href="../../df/dfa/structrm_1_1CameraConfig.html#a1a285fd4742e8ced4907f83d520c943b">rm::CameraConfig::create</a>(<a class="code hl_enumvalue" href="../../dc/d90/group__camera.html#gga90ca2fddbb5f19ea4dc6f862157be49da535863a82f163709557e59e2eb8139a7">rm::GrabMode::Continuous</a>, <a class="code hl_enumvalue" href="../../dc/d90/group__camera.html#gga034d81b381d7c04ba4549cf3533750ffa5bd4c87976f48e6a53919d53e14025e9">rm::RetrieveMode::OpenCV</a>));</div>
<div class="line">    cv::Mat frame;</div>
<div class="line">    <span class="keywordflow">while</span>(capture.read(frame)) {</div>
<div class="line">        cv::imshow(<span class="stringliteral">&quot;frame&quot;</span>, frame);</div>
<div class="line">        <span class="keywordflow">if</span> (cv::waitKey(1) == 27)</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="ttc" id="agroup__camera_html_gga034d81b381d7c04ba4549cf3533750ffa5bd4c87976f48e6a53919d53e14025e9"><div class="ttname"><a href="../../dc/d90/group__camera.html#gga034d81b381d7c04ba4549cf3533750ffa5bd4c87976f48e6a53919d53e14025e9">rm::RetrieveMode::OpenCV</a></div><div class="ttdeci">@ OpenCV</div><div class="ttdoc">使用 OpenCV 的 &#39;cvtColor&#39; 进行处理</div><div class="ttdef"><b>定义</b> camutils.hpp:49</div></div>
</div><!-- fragment --></li>
<li><p class="startli"><b class="tab-title">Python</b></p>
<div class="fragment"><div class="line"><span class="keyword">import</span> rm</div>
<div class="line"><span class="keyword">import</span> cv2</div>
<div class="line"> </div>
<div class="line">cam_cfg = <a class="code hl_struct" href="../../df/dfa/structrm_1_1CameraConfig.html">rm.CameraConfig</a>()</div>
<div class="line">cam_cfg.grab_mode = rm.GrabMode.Continuous</div>
<div class="line">cam_cfg.retrieve_mode = rm.RetrieveMode.OpenCV</div>
<div class="line"> </div>
<div class="line">capture = <a class="code hl_class" href="../../de/de8/classrm_1_1MvCamera.html">rm.MvCamera</a>(cam_cfg)</div>
<div class="line"><span class="keywordflow">while</span> <span class="keyword">True</span>:</div>
<div class="line">    res, frame = capture.read()</div>
<div class="line">    <span class="keywordflow">if</span> <span class="keywordflow">not</span> res:</div>
<div class="line">        <span class="keywordflow">break</span></div>
<div class="line">    cv2.imshow(<span class="stringliteral">&quot;frame&quot;</span>, frame)</div>
<div class="line">    <span class="keywordflow">if</span> cv2.waitKey(1) == 27:</div>
<div class="line">        <span class="keywordflow">break</span></div>
</div><!-- fragment --></li>
</ul>
</div><div class="tabbed"></div><h2 class="doxsection"><a class="anchor" id="autotoc_md264"></a>
4.2 软触发</h2>
<div class="tabbed"></div><div class="tabbed"><ul>
<li><p class="startli"><b class="tab-title">C++</b></p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &lt;opencv2/highgui.hpp&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#include &lt;rmvl/camera/mv_camera.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;rmvl/core/timer.hpp&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">int</span> main() {</div>
<div class="line">    <span class="keyword">auto</span> camera_config = <a class="code hl_function" href="../../df/dfa/structrm_1_1CameraConfig.html#a1a285fd4742e8ced4907f83d520c943b">rm::CameraConfig::create</a>(<a class="code hl_enumvalue" href="../../dc/d90/group__camera.html#gga90ca2fddbb5f19ea4dc6f862157be49da719d067b229178f03bcfa1da4ac4dede">rm::GrabMode::Software</a>, <a class="code hl_enumvalue" href="../../dc/d90/group__camera.html#gga034d81b381d7c04ba4549cf3533750ffa5bd4c87976f48e6a53919d53e14025e9">rm::RetrieveMode::OpenCV</a>)</div>
<div class="line">    <a class="code hl_class" href="../../de/de8/classrm_1_1MvCamera.html">rm::MvCamera</a> capture(camera_config);</div>
<div class="line"> </div>
<div class="line">    <span class="keywordtype">bool</span> run = <span class="keyword">true</span>;</div>
<div class="line">    std::thread th([&amp;run]() {</div>
<div class="line">        <span class="keywordflow">while</span> (run) {</div>
<div class="line">            Timer::sleep_for(10);</div>
<div class="line">            capture.trigger(<a class="code hl_enumvalue" href="../../dc/d90/group__camera.html#gga7187e1219e13ae6a717cce746e4c9136acd3419bad74278b9b6096836fbc6bec2">rm::CameraEvents::software</a>); <span class="comment">// 触发</span></div>
<div class="line">        }</div>
<div class="line">    });</div>
<div class="line"> </div>
<div class="line">    cv::Mat frame;</div>
<div class="line">    <span class="keywordflow">while</span> (capture.read(frame)) {</div>
<div class="line">        cv::imshow(<span class="stringliteral">&quot;frame&quot;</span>, frame);</div>
<div class="line">        <span class="keywordflow">if</span> (cv::waitKey(1) == 27) {</div>
<div class="line">            run = <span class="keyword">false</span>;</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line">    th.join();</div>
<div class="line">}</div>
<div class="ttc" id="agroup__camera_html_gga90ca2fddbb5f19ea4dc6f862157be49da719d067b229178f03bcfa1da4ac4dede"><div class="ttname"><a href="../../dc/d90/group__camera.html#gga90ca2fddbb5f19ea4dc6f862157be49da719d067b229178f03bcfa1da4ac4dede">rm::GrabMode::Software</a></div><div class="ttdeci">@ Software</div><div class="ttdoc">软触发</div><div class="ttdef"><b>定义</b> camutils.hpp:34</div></div>
</div><!-- fragment --></li>
<li><p class="startli"><b class="tab-title">Python</b></p>
<dl class="todo"><dt><b><a class="el" href="../../dd/da0/todo.html#_todo000002">待办事项</a></b></dt><dd>Python 软触发示例暂无</dd></dl>
</li>
</ul>
</div><div class="tabbed"></div> </div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- HTML footer for doxygen 1.8.6-->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
制作者 &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../../doxygen.svg" alt="doxygen"/>
</a> 1.15.0
</small></address>
<script type="text/javascript">
//<![CDATA[
addTutorialsButtons();
//]]>
</script>
</body>
</html>
