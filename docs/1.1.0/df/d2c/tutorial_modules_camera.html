<!-- HTML header for doxygen 1.8.6-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<title>RMVL: 相机设备</title>
<link href="../../rmvl-logo-small.png" rel="shortcut icon" type="image/x-icon" />
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<script type="text/javascript" src="../../tutorial-utils.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
<link href="../../doxygen-awesome.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<!--#include virtual="/google-search.html"-->
<script type="text/javascript" src="/docs/version.js"></script>
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="../../rmvl-logo.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">RMVL
   &#160;<span id="projectnumber">1.1.0</span>
   </div>
   <div id="projectbrief">RoboMaster Vision Library</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- 制作者 Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "../../search",false,'搜索','.html');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('../../',true,false,'search.php','搜索');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../dd/da0/tutorials.html">视觉库使用教程</a></li><li class="navelem"><a class="el" href="../../d6/d6e/tutorial_table_of_content_modules.html">主要模块使用教程</a></li>  </ul>
</div>
</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">相机设备 </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>目录</h3>
<ul><li class="level1"><a href="#autotoc_md188">1. 如何使用</a><ul><li class="level2"><a href="#autotoc_md189">1.1 初始化</a></li>
<li class="level2"><a href="#autotoc_md190">1.2 光学参数设置</a><ul><li class="level3"><a href="#autotoc_md191">1.2.1 曝光设置</a></li>
<li class="level3"><a href="#autotoc_md192">1.2.2 白平衡设置</a></li>
<li class="level3"><a href="#autotoc_md193">1.2.3 其余光学参数设置</a></li>
</ul>
</li>
<li class="level2"><a href="#autotoc_md194">1.3 处理参数设置</a></li>
<li class="level2"><a href="#autotoc_md195">1.4 事件设置</a></li>
</ul>
</li>
<li class="level1"><a href="#autotoc_md196">2. para 参数加载</a></li>
<li class="level1"><a href="#autotoc_md197">3. 示例程序</a><ul><li class="level2"><a href="#autotoc_md198">3.1 单相机</a></li>
<li class="level2"><a href="#autotoc_md199">3.2 多相机</a></li>
<li class="level2"><a href="#autotoc_md200">3.3 相机录屏</a></li>
<li class="level2"><a href="#autotoc_md201">3.4 相机标定</a></li>
</ul>
</li>
<li class="level1"><a href="#autotoc_md202">4. 使用 Demo</a></li>
</ul>
</div>
<div class="textblock"><p><a class="anchor" id="md__home_zhaoxi_桌面_Vision_cv_rmvl_rmvl_doc_tutorials_modules_devices_camera"></a></p>
<dl class="section author"><dt>作者</dt><dd>赵曦 </dd></dl>
<dl class="section date"><dt>日期</dt><dd>2023/03/15</dd></dl>
<p><b>上一篇教程：</b><a class="el" href="../../d8/d82/tutorial_modules_ort.html">ONNX-Runtime 分类网络部署库</a> ↑<br  />
</p>
<hr  />
<p>相关类 <a class="el" href="../../de/de8/classrm_1_1MvCamera.html" title="迈德威视相机库 MindVision camera library">rm::MvCamera</a>, <a class="el" href="../../db/d9f/classrm_1_1HikCamera.html" title="海康机器人相机库 HikRobot camera library">rm::HikCamera</a>.</p>
<h1><a class="anchor" id="autotoc_md188"></a>
1. 如何使用</h1>
<p>使用前需安装相机驱动，详情参考：<a class="el" href="../../d1/d9a/tutorial_build.html">构建视觉库</a></p>
<h2><a class="anchor" id="autotoc_md189"></a>
1.1 初始化</h2>
 <div class='newInnerHTML'>MindVision</div><div> <script type='text/javascript'> addToggle(); </script><p>创建 MvCamera 对象即可初始化相机，例如：</p>
<div class="fragment"><div class="line">MvCamera capture1(<a class="code" href="../../dc/d90/group__camera.html#ggabe45f568f488e51e950b288993591ebfa3e536eb26f569926b26d2943818ee59e">GRAB_CONTINUOUS</a>, <a class="code" href="../../dc/d90/group__camera.html#gga68c858d1ecf8b5ab9d25a0d4a2acb2caa86ca2b68fa5e168f10c606d6ca05737e">RETRIEVE_SDK</a>, <span class="stringliteral">&quot;0123456789&quot;</span>);</div>
<div class="line">MvCamera capture2(<a class="code" href="../../dc/d90/group__camera.html#ggabe45f568f488e51e950b288993591ebfa7d6dd7898b259f0a82d66f1c44acf541">GRAB_SOFTWARE</a>, <a class="code" href="../../dc/d90/group__camera.html#gga68c858d1ecf8b5ab9d25a0d4a2acb2caa3ad9b40b26e6e5de20a8db8060cab87c">RETRIEVE_CV</a>, <span class="stringliteral">&quot;0123456789&quot;</span>);</div>
<div class="ttc" id="agroup__camera_html_gga68c858d1ecf8b5ab9d25a0d4a2acb2caa3ad9b40b26e6e5de20a8db8060cab87c"><div class="ttname"><a href="../../dc/d90/group__camera.html#gga68c858d1ecf8b5ab9d25a0d4a2acb2caa3ad9b40b26e6e5de20a8db8060cab87c">rm::RETRIEVE_CV</a></div><div class="ttdeci">@ RETRIEVE_CV</div><div class="ttdoc">使用 OpenCV 的 'cvtColor' 进行处理 Retrieve using cvtColor function in OpenCV</div><div class="ttdef"><b>Definition:</b> camutils.hpp:41</div></div>
<div class="ttc" id="agroup__camera_html_gga68c858d1ecf8b5ab9d25a0d4a2acb2caa86ca2b68fa5e168f10c606d6ca05737e"><div class="ttname"><a href="../../dc/d90/group__camera.html#gga68c858d1ecf8b5ab9d25a0d4a2acb2caa86ca2b68fa5e168f10c606d6ca05737e">rm::RETRIEVE_SDK</a></div><div class="ttdeci">@ RETRIEVE_SDK</div><div class="ttdoc">使用官方 SDK 进行处理 Retrieve using official SDK</div><div class="ttdef"><b>Definition:</b> camutils.hpp:40</div></div>
<div class="ttc" id="agroup__camera_html_ggabe45f568f488e51e950b288993591ebfa3e536eb26f569926b26d2943818ee59e"><div class="ttname"><a href="../../dc/d90/group__camera.html#ggabe45f568f488e51e950b288993591ebfa3e536eb26f569926b26d2943818ee59e">rm::GRAB_CONTINUOUS</a></div><div class="ttdeci">@ GRAB_CONTINUOUS</div><div class="ttdoc">连续采样 Continuous grabbing</div><div class="ttdef"><b>Definition:</b> camutils.hpp:31</div></div>
<div class="ttc" id="agroup__camera_html_ggabe45f568f488e51e950b288993591ebfa7d6dd7898b259f0a82d66f1c44acf541"><div class="ttname"><a href="../../dc/d90/group__camera.html#ggabe45f568f488e51e950b288993591ebfa7d6dd7898b259f0a82d66f1c44acf541">rm::GRAB_SOFTWARE</a></div><div class="ttdeci">@ GRAB_SOFTWARE</div><div class="ttdoc">软触发 Grab by software trigger</div><div class="ttdef"><b>Definition:</b> camutils.hpp:32</div></div>
</div><!-- fragment --> </div>  <div class='newInnerHTML'>HikRobot</div><div> <script type='text/javascript'> addToggle(); </script><p>创建 HikCamera 对象即可初始化相机，例如：</p>
<div class="fragment"><div class="line">HikCamera capture1(<a class="code" href="../../dc/d90/group__camera.html#ggabe45f568f488e51e950b288993591ebfa3e536eb26f569926b26d2943818ee59e">GRAB_CONTINUOUS</a>, <a class="code" href="../../dc/d90/group__camera.html#gga68c858d1ecf8b5ab9d25a0d4a2acb2caa86ca2b68fa5e168f10c606d6ca05737e">RETRIEVE_SDK</a>, <span class="stringliteral">&quot;0123456789&quot;</span>);</div>
<div class="line">HikCamera capture2(<a class="code" href="../../dc/d90/group__camera.html#ggabe45f568f488e51e950b288993591ebfa7d6dd7898b259f0a82d66f1c44acf541">GRAB_SOFTWARE</a>, <a class="code" href="../../dc/d90/group__camera.html#gga68c858d1ecf8b5ab9d25a0d4a2acb2caa3ad9b40b26e6e5de20a8db8060cab87c">RETRIEVE_CV</a>, <span class="stringliteral">&quot;0123456789&quot;</span>);</div>
</div><!-- fragment --> </div> <p>第 1 个参数为 <b>相机采集模式</b> ，见下表</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadCenter">采集方式   </th><th class="markdownTableHeadCenter">枚举标识符   </th><th class="markdownTableHeadNone">含义    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyCenter">连续采集   </td><td class="markdownTableBodyCenter">GRAB_CONTINUOUS   </td><td class="markdownTableBodyNone">连续触发相机，每次 <code>grab</code> 方法被执行后，均会触发相机的采样功能，一般调用 <code>read</code> 方法可间接调用 <code>grab</code>。    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyCenter">软触发   </td><td class="markdownTableBodyCenter">GRAB_SOFTWARE   </td><td class="markdownTableBodyNone">软件触发，需要手动设置触发帧，<code>grab</code> 方法只有在被设置触发帧之后的下一次执行有效，否则会阻塞以等待接收到触发帧，在 <code>1s</code> 内如果没有收到触发帧，则会被认为 <code>grab</code> 失败。    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyCenter">硬触发   </td><td class="markdownTableBodyCenter">GRAB_HARDWARE   </td><td class="markdownTableBodyNone">硬件触发，通过向相机的航空接头传输高低电平信号来设置触发帧，信号的有效性可通过软件设置，例如设置高电平、低电平、上升边沿、下降边沿的一种为触发方式，<code>grab</code> 方法同软触发。   </td></tr>
</table>
<p>详细的触发方式 </p><dl class="section see"><dt>参见</dt><dd></dd></dl>
<ul>
<li><a href="https://vision.scutbot.cn/HikRobot/index.html" target="_blank">HikRobot 工业相机手册 </a></li>
<li><a href="https://vision.scutbot.cn/MindVision/mv.pdf" target="_blank">MindVision 手册 </a></li>
</ul>
<p>第 2 个参数为 <b>相机处理模式</b> ，见下表</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadCenter">处理模式   </th><th class="markdownTableHeadCenter">枚举标识符   </th><th class="markdownTableHeadCenter">十六进制数   </th><th class="markdownTableHeadNone">含义    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyCenter">使用官方 SDK 进行处理   </td><td class="markdownTableBodyCenter">RETRIEVE_SDK   </td><td class="markdownTableBodyCenter"><code>0x01</code>   </td><td class="markdownTableBodyNone">相机在捕获到 raw 图像后，采用 SDK 提供的函数进行处理，兼容性高，不依赖第三方库，但效率较低。    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyCenter">使用 <code>cvtColor</code> 进行处理   </td><td class="markdownTableBodyCenter">RETRIEVE_CV   </td><td class="markdownTableBodyCenter"><code>0x02</code>   </td><td class="markdownTableBodyNone">第三方库采用 OpenCV，使用 <code>cv::cvtColor</code> 进行转码操作，对多核 CPU 设备性能较高。    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyCenter">使用 <code>LUT</code> 进行处理   </td><td class="markdownTableBodyCenter">RETRIEVE_LUT   </td><td class="markdownTableBodyCenter"><code>0x10</code>   </td><td class="markdownTableBodyNone">Look-Up Table 单通道像素映射表，使用 <code>cv::LUT</code> 将 raw 图像像素值作映射，再进行转码操作。   </td></tr>
</table>
<h2><a class="anchor" id="autotoc_md190"></a>
1.2 光学参数设置</h2>
<h3><a class="anchor" id="autotoc_md191"></a>
1.2.1 曝光设置</h3>
<p>手动/自动设置曝光</p>
<div class="fragment"><div class="line">capture.set(<a class="code" href="../../dc/d90/group__camera.html#gga3dabb1d304a05608ec415f8f6c289423a59e64c9447cf3096c426587cc1bd6e13">CAMERA_MANUAL_EXPOSURE</a>); <span class="comment">// 手动曝光</span></div>
<div class="line">capture.set(<a class="code" href="../../dc/d90/group__camera.html#gga3dabb1d304a05608ec415f8f6c289423aba38501dbc9b4a9a9f921d0a40d8c1fb">CAMERA_AUTO_EXPOSURE</a>);   <span class="comment">// 自动曝光</span></div>
<div class="ttc" id="agroup__camera_html_gga3dabb1d304a05608ec415f8f6c289423a59e64c9447cf3096c426587cc1bd6e13"><div class="ttname"><a href="../../dc/d90/group__camera.html#gga3dabb1d304a05608ec415f8f6c289423a59e64c9447cf3096c426587cc1bd6e13">rm::CAMERA_MANUAL_EXPOSURE</a></div><div class="ttdeci">@ CAMERA_MANUAL_EXPOSURE</div><div class="ttdoc">手动曝光 Manual exposure</div><div class="ttdef"><b>Definition:</b> camutils.hpp:58</div></div>
<div class="ttc" id="agroup__camera_html_gga3dabb1d304a05608ec415f8f6c289423aba38501dbc9b4a9a9f921d0a40d8c1fb"><div class="ttname"><a href="../../dc/d90/group__camera.html#gga3dabb1d304a05608ec415f8f6c289423aba38501dbc9b4a9a9f921d0a40d8c1fb">rm::CAMERA_AUTO_EXPOSURE</a></div><div class="ttdeci">@ CAMERA_AUTO_EXPOSURE</div><div class="ttdoc">自动曝光 Automatic exposure</div><div class="ttdef"><b>Definition:</b> camutils.hpp:56</div></div>
</div><!-- fragment --><p>设置曝光值</p>
<div class="fragment"><div class="line">capture.set(<a class="code" href="../../dc/d90/group__camera.html#gga3dabb1d304a05608ec415f8f6c289423a5b0ea66f2c7029d10ea3b4505fcc784c">CAMERA_EXPOSURE</a>, 600); <span class="comment">// 设置曝光值为 600</span></div>
<div class="ttc" id="agroup__camera_html_gga3dabb1d304a05608ec415f8f6c289423a5b0ea66f2c7029d10ea3b4505fcc784c"><div class="ttname"><a href="../../dc/d90/group__camera.html#gga3dabb1d304a05608ec415f8f6c289423a5b0ea66f2c7029d10ea3b4505fcc784c">rm::CAMERA_EXPOSURE</a></div><div class="ttdeci">@ CAMERA_EXPOSURE</div><div class="ttdoc">曝光值 Expusure</div><div class="ttdef"><b>Definition:</b> camutils.hpp:60</div></div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md192"></a>
1.2.2 白平衡设置</h3>
<p>手动/自动设置白平衡</p>
<div class="fragment"><div class="line">capture.set(<a class="code" href="../../dc/d90/group__camera.html#gga3dabb1d304a05608ec415f8f6c289423ae64a4a686a53a8c737d1ca10af38e96c">CAMERA_MANUAL_WB</a>); <span class="comment">// 手动白平衡</span></div>
<div class="line">capture.set(<a class="code" href="../../dc/d90/group__camera.html#gga3dabb1d304a05608ec415f8f6c289423a4f96a87ba77f6cfdca97b7dfcbac9972">CAMERA_AUTO_WB</a>);   <span class="comment">// 自动白平衡</span></div>
<div class="ttc" id="agroup__camera_html_gga3dabb1d304a05608ec415f8f6c289423a4f96a87ba77f6cfdca97b7dfcbac9972"><div class="ttname"><a href="../../dc/d90/group__camera.html#gga3dabb1d304a05608ec415f8f6c289423a4f96a87ba77f6cfdca97b7dfcbac9972">rm::CAMERA_AUTO_WB</a></div><div class="ttdeci">@ CAMERA_AUTO_WB</div><div class="ttdoc">自动白平衡 Automatic white balance</div><div class="ttdef"><b>Definition:</b> camutils.hpp:57</div></div>
<div class="ttc" id="agroup__camera_html_gga3dabb1d304a05608ec415f8f6c289423ae64a4a686a53a8c737d1ca10af38e96c"><div class="ttname"><a href="../../dc/d90/group__camera.html#gga3dabb1d304a05608ec415f8f6c289423ae64a4a686a53a8c737d1ca10af38e96c">rm::CAMERA_MANUAL_WB</a></div><div class="ttdeci">@ CAMERA_MANUAL_WB</div><div class="ttdoc">手动白平衡 Manual white balance</div><div class="ttdef"><b>Definition:</b> camutils.hpp:59</div></div>
</div><!-- fragment --><p>设置各通道增益，并生效（在手动设置白平衡模式下有效）</p>
<div class="fragment"><div class="line">capture.set(<a class="code" href="../../dc/d90/group__camera.html#gga3dabb1d304a05608ec415f8f6c289423aebabd6b90c4ce8da92954bcfdb26b801">CAMERA_WB_RGAIN</a>, 102); <span class="comment">// 红色通道增益设置为 102</span></div>
<div class="line">capture.set(<a class="code" href="../../dc/d90/group__camera.html#gga3dabb1d304a05608ec415f8f6c289423a34a84085560fe527d704d46608dddc58">CAMERA_WB_GGAIN</a>, 101); <span class="comment">// 绿色通道增益设置为 101</span></div>
<div class="line">capture.set(<a class="code" href="../../dc/d90/group__camera.html#gga3dabb1d304a05608ec415f8f6c289423a07d8c840fa3c4cce61481159b7c3247e">CAMERA_WB_BGAIN</a>, 100); <span class="comment">// 蓝色通道增益设置为 100</span></div>
<div class="ttc" id="agroup__camera_html_gga3dabb1d304a05608ec415f8f6c289423a07d8c840fa3c4cce61481159b7c3247e"><div class="ttname"><a href="../../dc/d90/group__camera.html#gga3dabb1d304a05608ec415f8f6c289423a07d8c840fa3c4cce61481159b7c3247e">rm::CAMERA_WB_BGAIN</a></div><div class="ttdeci">@ CAMERA_WB_BGAIN</div><div class="ttdoc">白平衡蓝色分量 Blue channel gain of white balance</div><div class="ttdef"><b>Definition:</b> camutils.hpp:65</div></div>
<div class="ttc" id="agroup__camera_html_gga3dabb1d304a05608ec415f8f6c289423a34a84085560fe527d704d46608dddc58"><div class="ttname"><a href="../../dc/d90/group__camera.html#gga3dabb1d304a05608ec415f8f6c289423a34a84085560fe527d704d46608dddc58">rm::CAMERA_WB_GGAIN</a></div><div class="ttdeci">@ CAMERA_WB_GGAIN</div><div class="ttdoc">白平衡绿色分量 Green channel gain of white balance</div><div class="ttdef"><b>Definition:</b> camutils.hpp:64</div></div>
<div class="ttc" id="agroup__camera_html_gga3dabb1d304a05608ec415f8f6c289423aebabd6b90c4ce8da92954bcfdb26b801"><div class="ttname"><a href="../../dc/d90/group__camera.html#gga3dabb1d304a05608ec415f8f6c289423aebabd6b90c4ce8da92954bcfdb26b801">rm::CAMERA_WB_RGAIN</a></div><div class="ttdeci">@ CAMERA_WB_RGAIN</div><div class="ttdoc">白平衡红色分量 Red channel gain of white balance</div><div class="ttdef"><b>Definition:</b> camutils.hpp:63</div></div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md193"></a>
1.2.3 其余光学参数设置</h3>
<div class="fragment"><div class="line">capture.set(<a class="code" href="../../dc/d90/group__camera.html#gga3dabb1d304a05608ec415f8f6c289423aee4e28daf641d7d80989a0240b1bad16">CAMERA_GAIN</a>, 64);        <span class="comment">// 设置模拟增益为 64</span></div>
<div class="line">capture.set(<a class="code" href="../../dc/d90/group__camera.html#gga3dabb1d304a05608ec415f8f6c289423ace4056201e197b9542f81baebe04d103">CAMERA_GAMMA</a>, 80);       <span class="comment">// 设置 Gamma 为 80</span></div>
<div class="line">capture.set(<a class="code" href="../../dc/d90/group__camera.html#gga3dabb1d304a05608ec415f8f6c289423ac1a2a996692cb0b6da234990a9f132d9">CAMERA_CONTRAST</a>, 120);   <span class="comment">// 设置对比度为 120</span></div>
<div class="line">capture.set(<a class="code" href="../../dc/d90/group__camera.html#gga3dabb1d304a05608ec415f8f6c289423a4e59d0a3cc5a29a91906432a818bc1bc">CAMERA_SATURATION</a>, 100); <span class="comment">// 设置饱和度为 100</span></div>
<div class="line">capture.set(<a class="code" href="../../dc/d90/group__camera.html#gga3dabb1d304a05608ec415f8f6c289423ae4750fa886f1876d153a68c5bc3b2e2f">CAMERA_SHARPNESS</a>, 100);  <span class="comment">// 设置锐度为 100</span></div>
<div class="ttc" id="agroup__camera_html_gga3dabb1d304a05608ec415f8f6c289423a4e59d0a3cc5a29a91906432a818bc1bc"><div class="ttname"><a href="../../dc/d90/group__camera.html#gga3dabb1d304a05608ec415f8f6c289423a4e59d0a3cc5a29a91906432a818bc1bc">rm::CAMERA_SATURATION</a></div><div class="ttdeci">@ CAMERA_SATURATION</div><div class="ttdoc">饱和度 Saturation ratio</div><div class="ttdef"><b>Definition:</b> camutils.hpp:67</div></div>
<div class="ttc" id="agroup__camera_html_gga3dabb1d304a05608ec415f8f6c289423ac1a2a996692cb0b6da234990a9f132d9"><div class="ttname"><a href="../../dc/d90/group__camera.html#gga3dabb1d304a05608ec415f8f6c289423ac1a2a996692cb0b6da234990a9f132d9">rm::CAMERA_CONTRAST</a></div><div class="ttdeci">@ CAMERA_CONTRAST</div><div class="ttdoc">对比度 Contrast ratio</div><div class="ttdef"><b>Definition:</b> camutils.hpp:66</div></div>
<div class="ttc" id="agroup__camera_html_gga3dabb1d304a05608ec415f8f6c289423ace4056201e197b9542f81baebe04d103"><div class="ttname"><a href="../../dc/d90/group__camera.html#gga3dabb1d304a05608ec415f8f6c289423ace4056201e197b9542f81baebe04d103">rm::CAMERA_GAMMA</a></div><div class="ttdeci">@ CAMERA_GAMMA</div><div class="ttdoc">Gamma 值 Gamma</div><div class="ttdef"><b>Definition:</b> camutils.hpp:62</div></div>
<div class="ttc" id="agroup__camera_html_gga3dabb1d304a05608ec415f8f6c289423ae4750fa886f1876d153a68c5bc3b2e2f"><div class="ttname"><a href="../../dc/d90/group__camera.html#gga3dabb1d304a05608ec415f8f6c289423ae4750fa886f1876d153a68c5bc3b2e2f">rm::CAMERA_SHARPNESS</a></div><div class="ttdeci">@ CAMERA_SHARPNESS</div><div class="ttdoc">锐度 Sharpness ratio</div><div class="ttdef"><b>Definition:</b> camutils.hpp:68</div></div>
<div class="ttc" id="agroup__camera_html_gga3dabb1d304a05608ec415f8f6c289423aee4e28daf641d7d80989a0240b1bad16"><div class="ttname"><a href="../../dc/d90/group__camera.html#gga3dabb1d304a05608ec415f8f6c289423aee4e28daf641d7d80989a0240b1bad16">rm::CAMERA_GAIN</a></div><div class="ttdeci">@ CAMERA_GAIN</div><div class="ttdoc">模拟增益 Analog gain</div><div class="ttdef"><b>Definition:</b> camutils.hpp:61</div></div>
</div><!-- fragment --><dl class="section note"><dt>注解</dt><dd>HikRobot 工业相机暂不支持修改 Gamma</dd></dl>
<h2><a class="anchor" id="autotoc_md194"></a>
1.3 处理参数设置</h2>
<div class="fragment"><div class="line"><span class="comment">// 设置硬触发采集延迟为 1000 μs，仅在硬触发模式下有效</span></div>
<div class="line">capture.set(<a class="code" href="../../dc/d90/group__camera.html#gga3dabb1d304a05608ec415f8f6c289423af4d09eb79373a2afa208c9ffb386d898">CAMERA_TRIGGER_DELAY</a>, 1000);</div>
<div class="line"><span class="comment">// 设置单次触发时的触发帧数为 5 帧，即一次触发能触发 5 帧画面，仅在触发模式下有效</span></div>
<div class="line">capture.set(<a class="code" href="../../dc/d90/group__camera.html#gga3dabb1d304a05608ec415f8f6c289423afd014bac1dc13348619b6107d4185c71">CAMERA_TRIGGER_COUNT</a>, 5);</div>
<div class="line"><span class="comment">// 设置单次触发时多次采集的周期为 100 μs，即一次触发信号能触发多帧画面，每帧间隔为 100 μs</span></div>
<div class="line">capture.set(<a class="code" href="../../dc/d90/group__camera.html#gga3dabb1d304a05608ec415f8f6c289423adbef478f5e47ac1462a3abe745e8ad83">CAMERA_TRIGGER_PERIOD</a>, 100);</div>
<div class="ttc" id="agroup__camera_html_gga3dabb1d304a05608ec415f8f6c289423adbef478f5e47ac1462a3abe745e8ad83"><div class="ttname"><a href="../../dc/d90/group__camera.html#gga3dabb1d304a05608ec415f8f6c289423adbef478f5e47ac1462a3abe745e8ad83">rm::CAMERA_TRIGGER_PERIOD</a></div><div class="ttdeci">@ CAMERA_TRIGGER_PERIOD</div><div class="ttdoc">单次触发时多次采集的周期（微秒）The period of multiple collection for a single trigger (μs)</div><div class="ttdef"><b>Definition:</b> camutils.hpp:75</div></div>
<div class="ttc" id="agroup__camera_html_gga3dabb1d304a05608ec415f8f6c289423af4d09eb79373a2afa208c9ffb386d898"><div class="ttname"><a href="../../dc/d90/group__camera.html#gga3dabb1d304a05608ec415f8f6c289423af4d09eb79373a2afa208c9ffb386d898">rm::CAMERA_TRIGGER_DELAY</a></div><div class="ttdeci">@ CAMERA_TRIGGER_DELAY</div><div class="ttdoc">硬触发采集延迟（微秒）Hard trigger collection delay (μs)</div><div class="ttdef"><b>Definition:</b> camutils.hpp:73</div></div>
<div class="ttc" id="agroup__camera_html_gga3dabb1d304a05608ec415f8f6c289423afd014bac1dc13348619b6107d4185c71"><div class="ttname"><a href="../../dc/d90/group__camera.html#gga3dabb1d304a05608ec415f8f6c289423afd014bac1dc13348619b6107d4185c71">rm::CAMERA_TRIGGER_COUNT</a></div><div class="ttdeci">@ CAMERA_TRIGGER_COUNT</div><div class="ttdoc">单次触发时的触发帧数 The number of frames in a single trigger</div><div class="ttdef"><b>Definition:</b> camutils.hpp:74</div></div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md195"></a>
1.4 事件设置</h2>
<div class="fragment"><div class="line">capture.set(<a class="code" href="../../dc/d90/group__camera.html#ggae34c165c49c1205024f12993bf060f57aad4505f28b41f355ff821263345544aa">CAMERA_ONCE_WB</a>);      <span class="comment">// 执行一次白平衡操作，仅在手动白平衡模式下有效</span></div>
<div class="line">capture.set(<a class="code" href="../../dc/d90/group__camera.html#ggae34c165c49c1205024f12993bf060f57a3857a1b7fcdddf0e793bcc6a63266475">CAMERA_SOFT_TRIGGER</a>); <span class="comment">// 执行一次软触发，仅在软触发模式下有效</span></div>
<div class="ttc" id="agroup__camera_html_ggae34c165c49c1205024f12993bf060f57a3857a1b7fcdddf0e793bcc6a63266475"><div class="ttname"><a href="../../dc/d90/group__camera.html#ggae34c165c49c1205024f12993bf060f57a3857a1b7fcdddf0e793bcc6a63266475">rm::CAMERA_SOFT_TRIGGER</a></div><div class="ttdeci">@ CAMERA_SOFT_TRIGGER</div><div class="ttdoc">执行软触发 Preform a software trigger</div><div class="ttdef"><b>Definition:</b> camutils.hpp:49</div></div>
<div class="ttc" id="agroup__camera_html_ggae34c165c49c1205024f12993bf060f57aad4505f28b41f355ff821263345544aa"><div class="ttname"><a href="../../dc/d90/group__camera.html#ggae34c165c49c1205024f12993bf060f57aad4505f28b41f355ff821263345544aa">rm::CAMERA_ONCE_WB</a></div><div class="ttdeci">@ CAMERA_ONCE_WB</div><div class="ttdoc">执行一次白平衡 Preform once white balance</div><div class="ttdef"><b>Definition:</b> camutils.hpp:48</div></div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md196"></a>
2. para 参数加载</h1>
<p>RMVL 提供了全局的相机参数对象: para::camera_param ，详情可参考类 para::CameraParam</p>
<h1><a class="anchor" id="autotoc_md197"></a>
3. 示例程序</h1>
<p>在构建 RMVL 时，需开启 <code>BUILD_EXAMPLES</code> 选项（默认开启）</p>
<div class="fragment"><div class="line">cmake -DBUILD_EXAMPLES=ON ..</div>
<div class="line">make -j4</div>
<div class="line">cd build</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md198"></a>
3.1 单相机</h2>
<p>单相机例程，在 build 文件夹下执行以下命令</p>
 <div class='newInnerHTML'>MindVision</div><div> <script type='text/javascript'> addToggle(); </script> <div class="fragment"><div class="line">bin/sample_mv_mono</div>
</div><!-- fragment -->  </div>   <div class='newInnerHTML'>HikRobot</div><div> <script type='text/javascript'> addToggle(); </script> <div class="fragment"><div class="line">bin/sample_hik_mono</div>
</div><!-- fragment -->  </div> <p>相机按照连续采样、<code>cvtColor</code> 处理方式运行，程序运行中，<code>cv::waitKey(1)</code> 接受到 <code>s</code> 键被按下时，可将参数保存到 <code>out_para.yml</code> 文件中。</p>
<p>键入一次 <code>Esc</code> 可暂停程序，按其余键可恢复。键入两次 <code>Esc</code> 可退出程序。</p>
<h2><a class="anchor" id="autotoc_md199"></a>
3.2 多相机</h2>
<p>多相机例程，在 <code>build</code> 文件夹下执行以下命令</p>
 <div class='newInnerHTML'>MindVision</div><div> <script type='text/javascript'> addToggle(); </script> <div class="fragment"><div class="line">bin/sample_mv_multi</div>
</div><!-- fragment -->  </div>   <div class='newInnerHTML'>HikRobot</div><div> <script type='text/javascript'> addToggle(); </script> <div class="fragment"><div class="line">bin/sample_hik_multi</div>
</div><!-- fragment -->  </div> <p>相机按照连续采样、<code>cvtColor</code> 处理方式运行，程序会枚举所有的相机设备，并可视化的显示出来，指定一个序列号来启动某一相机。</p>
<p>程序运行过程中，相机参数会自动从 <code>out_para.yml</code> 中加载，若没有则会按照默认值运行。</p>
<p>键入一次 <code>Esc</code> 可暂停程序，按其余键可恢复。键入两次 <code>Esc</code> 可退出程序。</p>
<h2><a class="anchor" id="autotoc_md200"></a>
3.3 相机录屏</h2>
<p>相机录屏例程，在 build 文件夹下执行以下命令</p>
 <div class='newInnerHTML'>MindVision</div><div> <script type='text/javascript'> addToggle(); </script> <div class="fragment"><div class="line">bin/sample_mv_writer</div>
</div><!-- fragment -->  </div>   <div class='newInnerHTML'>HikRobot</div><div> <script type='text/javascript'> addToggle(); </script> <div class="fragment"><div class="line">bin/sample_hik_writer</div>
</div><!-- fragment -->  </div> <p>相机按照连续采样、<code>cvtColor</code> 处理方式运行，<code>-o</code> 可指定输出文件名，否则默认输出到 <code>ts.avi</code>，例如</p>
 <div class='newInnerHTML'>MindVision</div><div> <script type='text/javascript'> addToggle(); </script> <div class="fragment"><div class="line">bin/sample_mv_writer -o=aaa.avi</div>
</div><!-- fragment -->  </div>   <div class='newInnerHTML'>HikRobot</div><div> <script type='text/javascript'> addToggle(); </script> <div class="fragment"><div class="line">bin/sample_hik_writer -o=aaa.avi</div>
</div><!-- fragment -->  </div> <p>程序运行过程中，相机参数会自动从 <code>out_para.yml</code> 中加载，若没有则会按照默认值运行。</p>
<h2><a class="anchor" id="autotoc_md201"></a>
3.4 相机标定</h2>
<p>相机标定程序，在 <code>build</code> 文件夹下执行以下命令</p>
 <div class='newInnerHTML'>MindVision</div><div> <script type='text/javascript'> addToggle(); </script> <div class="fragment"><div class="line">bin/sample_mv_calibration -w=&lt;?&gt; -h=&lt;?&gt; -s=&lt;?&gt; -d=&lt;?&gt; -n=&lt;?&gt;</div>
</div><!-- fragment -->  </div>   <div class='newInnerHTML'>HikRobot</div><div> <script type='text/javascript'> addToggle(); </script> <div class="fragment"><div class="line">bin/sample_hik_calibration -w=&lt;?&gt; -h=&lt;?&gt; -s=&lt;?&gt; -d=&lt;?&gt; -n=&lt;?&gt;</div>
</div><!-- fragment -->  </div> <p><code>&lt;?&gt;</code> 表示可调节，具体帮助可直接执行以下命令</p>
 <div class='newInnerHTML'>MindVision</div><div> <script type='text/javascript'> addToggle(); </script> <div class="fragment"><div class="line">bin/sample_mv_calibration -help</div>
</div><!-- fragment -->  </div>   <div class='newInnerHTML'>HikRobot</div><div> <script type='text/javascript'> addToggle(); </script> <div class="fragment"><div class="line">bin/sample_hik_calibration -help</div>
</div><!-- fragment -->  </div> <h1><a class="anchor" id="autotoc_md202"></a>
4. 使用 Demo</h1>
<dl class="section note"><dt>注解</dt><dd>下面以 MvCamera 为例， HikCamera 相机使用方式与之完全相同</dd></dl>
<p>连续采样：</p>
<div class="fragment"><div class="line"><span class="keywordtype">int</span> main()</div>
<div class="line">{</div>
<div class="line">    MvCamera capture(<a class="code" href="../../dc/d90/group__camera.html#ggabe45f568f488e51e950b288993591ebfa3e536eb26f569926b26d2943818ee59e">GRAB_CONTINUOUS</a>, <a class="code" href="../../dc/d90/group__camera.html#gga68c858d1ecf8b5ab9d25a0d4a2acb2caa3ad9b40b26e6e5de20a8db8060cab87c">RETRIEVE_CV</a>);</div>
<div class="line">    Mat frame;</div>
<div class="line">    <span class="keywordflow">while</span>(capture.read(frame))</div>
<div class="line">    {</div>
<div class="line">        imshow(<span class="stringliteral">&quot;frame&quot;</span>, frame);</div>
<div class="line">        <span class="keywordflow">if</span> (waitKey(1) == 27)</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">    }</div>
<div class="line">}</div>
</div><!-- fragment --><p>软触发：</p>
<div class="fragment"><div class="line"><span class="keywordtype">int</span> main()</div>
<div class="line">{</div>
<div class="line">    MvCamera capture(<a class="code" href="../../dc/d90/group__camera.html#ggabe45f568f488e51e950b288993591ebfa7d6dd7898b259f0a82d66f1c44acf541">GRAB_SOFTWARE</a>, <a class="code" href="../../dc/d90/group__camera.html#gga68c858d1ecf8b5ab9d25a0d4a2acb2caa3ad9b40b26e6e5de20a8db8060cab87c">RETRIEVE_CV</a>);</div>
<div class="line"> </div>
<div class="line">    <span class="keywordtype">bool</span> run = <span class="keyword">true</span>;</div>
<div class="line">    thread th(</div>
<div class="line">        [&amp;run]()</div>
<div class="line">        {</div>
<div class="line">            <span class="keywordflow">while</span> (run)</div>
<div class="line">            {</div>
<div class="line">                this_thread::sleep_for(chrono::milliseconds(10));</div>
<div class="line">                capture.set(<a class="code" href="../../dc/d90/group__camera.html#ggae34c165c49c1205024f12993bf060f57a3857a1b7fcdddf0e793bcc6a63266475">CAMERA_SOFT_TRIGGER</a>); <span class="comment">// 触发</span></div>
<div class="line">            }</div>
<div class="line">        });</div>
<div class="line"> </div>
<div class="line">    Mat frame;</div>
<div class="line">    <span class="keywordflow">while</span> (capture.read(frame))</div>
<div class="line">    {</div>
<div class="line">        imshow(<span class="stringliteral">&quot;frame&quot;</span>, frame);</div>
<div class="line">        <span class="keywordflow">if</span> (waitKey(1) == 27)</div>
<div class="line">        {</div>
<div class="line">            run = <span class="keyword">false</span>;</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line">    th.join();</div>
<div class="line">}</div>
</div><!-- fragment --> </div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- HTML footer for doxygen 1.8.6-->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
生成于 2024年 四月 21日 星期日 16:21:28 , 为 RMVL使用  &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/>
</a> 1.9.1
</small></address>
<script type="text/javascript">
//<![CDATA[
addTutorialsButtons();
//]]>
</script>
</body>
</html>
